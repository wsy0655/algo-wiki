# ğŸ“¦ æ ˆï¼ˆStackï¼‰

## ğŸ“˜ å¼•å…¥

![](https://oi-wiki.org/ds/images/stack.svg)

æ ˆï¼ˆStackï¼‰æ˜¯ OI å’Œæ—¥å¸¸ç¼–ç¨‹ä¸­å¸¸è§çš„ä¸€ç§çº¿æ€§æ•°æ®ç»“æ„ï¼Œå…¶ç‰¹ç‚¹æ˜¯ **å…ˆè¿›åå‡ºï¼ˆLIFOï¼‰**ã€‚

æƒ³è±¡ä¸€ä¸‹æ‰‹æªå¼¹å¤¹ä¸Šå¼¹çš„è¿‡ç¨‹ï¼Œå…ˆå‹å…¥çš„å­å¼¹åœ¨æœ€åº•éƒ¨ï¼Œæœ€åå‹å…¥çš„å­å¼¹æœ€å…ˆæ‰“å‡ºğŸ”«ã€‚


---

## ğŸ› ï¸ å®ç°æ–¹å¼

### ğŸ“ æ•°ç»„æ¨¡æ‹Ÿæ ˆ

```cpp
int stk[N];
int top = 0; // æ ˆé¡¶ä¸‹æ ‡ï¼Œtop = 0 è¡¨ç¤ºç©ºæ ˆ
```

- åŠ å…¥å…ƒç´ ï¼š`stk[++top] = x;`
- å¼¹å‡ºæ ˆé¡¶ï¼š`if (top > 0) top--;`
- æŸ¥çœ‹æ ˆé¡¶ï¼š`if (top > 0) cout << stk[top];`
- è·å–æ ˆå¤§å°ï¼š`cout << top;`
- æ¸…ç©ºæ ˆï¼š`top = 0;`


âœ… **ä¼˜ç‚¹**ï¼šå¯ä»¥ç›´æ¥è®¿é—®ä»»æ„ä½ç½®ï¼Œæ¸…ç©ºå¿«ï¼Œæ•ˆç‡é«˜ã€‚


**æ¨¡æ¿é¢˜ä»£ç å®ç°**

[ç‚¹æˆ‘è·³è½¬æ¨¡æ¿é¢˜](http://www.tarjanoj.com/d/tarjan24/p/1105)


```cpp
#include <bits/stdc++.h>
#define ull unsigned long long
#define ll long long
using namespace std;
ull stk[1000005];
int main()
{
	ios::sync_with_stdio(false);
	cin.tie(0); // ä¸è¦ç”¨ endlï¼Œæ¢è¡Œç”¨ \n 
    int t;
    cin >> t;
    while (t--)
    {
    	int n;
		cin >> n;
		int top = 0; // ä»£è¡¨æ ˆé¡¶ï¼Œä¹Ÿèµ·åˆ°äº†å¤šç»„æ•°æ®æ¸…ç©ºæ ˆçš„ä½œç”¨  
		for (int i = 1; i <= n; i++)
		{
			string op;
			cin >> op;
			if (op == "push")
			{
				ull x;
				cin >> x;
				stk[++top] = x;
			} 
			if (op == "pop")
			{
				if (top > 0) top--; // åˆ é™¤æ ˆé¡¶
				else cout << "Empty\n"; 
			}
			if (op == "query")
			{
				if (top > 0) cout << stk[top] << "\n";
				else cout << "Anguei!\n";
			}
			if (op == "size")
			{
				cout << top << "\n";
			}
		} 
	}
    return 0;
}
```

---

### ğŸ§° STL `stack` å®ç°

```cpp
#include <stack>
stack<int> stk;
```

| å‡½æ•°      | ä½œç”¨         | ç¤ºä¾‹           | æ³¨æ„äº‹é¡¹                                                 |
| --------- | ------------ | -------------- | -------------------------------------------------------- |
| `push(x)` | å…¥æ ˆ         | `stk.push(5);` | å‡½æ•°æ— è¿”å›å€¼ã€‚                                           |
| `pop()`   | å‡ºæ ˆ         | `stk.pop();`   | å‡½æ•°æ— è¿”å›å€¼ã€‚ä¿è¯æ ˆä¸ä¸ºç©ºæ‰èƒ½ä½¿ç”¨ï¼Œå¦åˆ™ `RE`ã€‚          |
| `top()`   | è·å–æ ˆé¡¶å…ƒç´  | `stk.top();`   | è¿”å›å€¼å–å†³äºæ ˆçš„ç±»å‹ã€‚ ä¿è¯æ ˆä¸ä¸ºç©ºæ‰èƒ½ä½¿ç”¨ï¼Œå¦åˆ™ `RE`ã€‚ |
| `size()`  | è·å–å¤§å°     | `stk.size();`  | è¿”å›å€¼ä¸º `unsigned int` ç±»å‹ã€‚                           |
| `empty()` | åˆ¤ç©º         | `stk.empty();` | è¿”å›å€¼ä¸º `bool`ï¼Œ`true` ä»£è¡¨ç©ºï¼Œ`false` ä»£è¡¨ä¸ç©ºã€‚       |

ğŸ§¹ æ¸…ç©ºé˜Ÿåˆ—ï¼š

```cpp
while (!stk.empty()) stk.pop();
```


**æ¨¡æ¿é¢˜ä»£ç å®ç°**

[ç‚¹æˆ‘è·³è½¬æ¨¡æ¿é¢˜](http://www.tarjanoj.com/d/tarjan24/p/1105)

```cpp
#include <bits/stdc++.h>
#define ull unsigned long long
#define ll long long
using namespace std;

int main()
{
	ios::sync_with_stdio(false);
	cin.tie(0); // ä¸è¦ç”¨ endlï¼Œæ¢è¡Œç”¨ \n 
    int t;
    cin >> t;
    while (t--)
    {
    	int n;
		cin >> n;
		stack<ull> stk;
		for (int i = 1; i <= n; i++)
		{
			string op;
			cin >> op;
			if (op == "push")
			{
				ull x;
				cin >> x;
				stk.push(x);
			} 
			if (op == "pop")
			{
				if (!stk.empty()) stk.pop(); // åˆ é™¤æ ˆé¡¶
				else cout << "Empty\n"; 
			}
			if (op == "query")
			{
				if (!stk.empty()) cout << stk.top() << "\n";
				else cout << "Anguei!\n";
			}
			if (op == "size")
			{
				cout << stk.size() << "\n";
			}
		} 
	}
    return 0;
}
```


ğŸ†š **å¯¹æ¯”**ï¼š

- æ•°ç»„æ¨¡æ‹Ÿæ•ˆç‡æ›´é«˜ï¼›
- STL ä½¿ç”¨æ›´æ–¹ä¾¿ã€æ˜“è¯»ï¼›
- å®æˆ˜ä¸­æ ¹æ®ä¹ æƒ¯é€‰æ‹©å³å¯ã€‚

---

## âœ… æ ˆçš„åº”ç”¨åœºæ™¯

| åº”ç”¨åœºæ™¯             | ç®€ä»‹                                   |
| -------------------- | -------------------------------------- |
| âœ… **æ‹¬å·åŒ¹é…**       | åˆ¤æ–­æ‹¬å·æ˜¯å¦æˆå¯¹å‡ºç°ã€åµŒå¥—æ˜¯å¦åˆæ³•     |
| âœ… **è¡¨è¾¾å¼æ±‚å€¼**     | è§£æä¸­ç¼€ã€åç¼€ã€å‰ç¼€è¡¨è¾¾å¼             |
| âœ… **å•è°ƒæ ˆ**         | å¯»æ‰¾æŸä¸€å…ƒç´ å·¦/å³ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§/å°çš„å…ƒç´  |
| âœ… **ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ** | æ¯ä¸ªå…ƒç´ å³è¾¹ç¬¬ä¸€ä¸ªæ›´å¤§çš„æ•°             |
| âœ… **æœ€å°æ ˆ**         | å®ç°æ”¯æŒ `getMin()` çš„æ ˆ               |
| âœ… **DFS éé€’å½’**     | ç”¨æ ˆæ¨¡æ‹Ÿå‡½æ•°é€’å½’è¿‡ç¨‹                   |

---

### ğŸ” æ‹¬å·åŒ¹é…ç®—æ³•ï¼ˆç¤ºä¾‹ï¼‰


**âœ… åˆæ³•æ ¼å¼:**

* `()()`, `(())` ç­‰æ˜¯åˆæ³•çš„
* `)(`, `())` æ˜¯ä¸åˆæ³•çš„

**âœ è¿è¡Œè§„åˆ™:**

1. éå†å­—ç¬¦ä¸²
2. `(` å‹å…¥æ ˆ
3. `)` æ£€æŸ¥æ ˆé¡¶ï¼šå¦‚æœä¸ä¸ºç©ºï¼Œ`pop()`ï¼›å¦åˆ™ `Wrong`
4. æœ€åæ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©º

```cpp
for (char x : s) 
{
    if (x == '(') stk.push(x);
    else 
    {
        if (stk.empty()) 
        {
            cout << "Wrong";
            break;
        } 
        else 
        {
            stk.pop();
        }
    }
}
if (!stk.empty()) cout << "Wrong";
```

---

### ğŸ”£ è¡¨è¾¾å¼æ±‚å€¼ï¼ˆåç¼€ï¼‰

**â—€ï¸ åç¼€è¡¨è¾¾å¼ (Reverse Polish Notation)**

å¦‚ï¼š

```
a + b * c * d + (e - f) * (g * h + i)
=> a b c * d * + e f - g h * i + * +
```

**è®¡ç®—é€»è¾‘ ğŸ§®**

- é‡åˆ°æ•°å­—å…¥æ ˆï¼›
- é‡åˆ°è¿ç®—ç¬¦ï¼Œå–å‡ºä¸¤ä¸ªæ•°è®¡ç®— `b op a`ï¼›
- å°†ç»“æœé‡æ–°å…¥æ ˆï¼›
- æœ€ç»ˆæ ˆé¡¶å³ä¸ºç»“æœã€‚

**âš  æ³¨æ„ï¼š**

* å…ˆå‡ºæ ˆçš„æ˜¯ aï¼Œåå‡ºçš„æ˜¯ bï¼Œå¦‚ 3-2 å¿…é¡»è®¡ç®— 3-2ï¼Œè€Œä¸æ˜¯ 2-3

**ä»£ç ç‰‡æ®µ ğŸ“œ**

```cpp
void eval(char op) 
{
    int a = stk.top(); stk.pop();
    int b = stk.top(); stk.pop();
    if (op == '+') stk.push(b + a);
    if (op == '-') stk.push(b - a);
    if (op == '*') stk.push(b * a);
    if (op == '/') stk.push(b / a);
}
```

**å¤šä½æ•°å¤„ç†æŠ€å·§ âœŒï¸**

```cpp
for (int i = 0; i < s.size(); i++) 
{
    if (isdigit(s[i])) 
    {
        int j = i, sum = 0;
        while (j < s.size() && isdigit(s[j])) 
        {
            sum = sum * 10 + s[j] - '0';
            j++;
        }
        stk.push(sum);
        i = j - 1;
    }
    else if (s[i] == '+' || s[i] == '-' || s[i] == '*') 
    {
        eval(s[i]);
    }
}
```

---

### ğŸ§ª éªŒè¯æ ˆå‡ºæ ˆåºåˆ—æ˜¯å¦åˆæ³•


æ¨¡æ‹Ÿå…¥æ ˆè¿‡ç¨‹ï¼ŒåŒæ—¶åˆ¤æ–­æ˜¯å¦èƒ½æŒ‰é¡ºåºå‡ºæ ˆ

**â–¶ æ€è·¯:**

1. ä¸ºäº†è®© b\[j] å‡ºç°åœ¨æ ˆé¡¶ï¼Œå°† a\[i] æŒ‰é¡ºåºå…¥æ ˆ
2. å¦‚æœ `stk.top() == b[j]`ï¼Œåˆ™ popï¼ŒåŒæ—¶ j++
3. æœ€å j == n+1 å³ä¸ºåˆæ³•

æ¨¡æ‹Ÿæ ˆæ“ä½œï¼š

```cpp
int j = 1;
for (int i = 1; i <= n; i++) {
    stk.push(a[i]);
    while (!stk.empty() && stk.top() == b[j]) {
        stk.pop();
        j++;
    }
}
if (j == n + 1) cout << "YES"; else cout << "NO";
```

---

## ğŸ“š æ¨èé¢˜å•

| å¹³å°       | é¢˜ç›®                           | é“¾æ¥                                               |
| ---------- | ------------------------------ | -------------------------------------------------- |
| æ´›è°·       | P2201 æ•°åˆ—ç¼–è¾‘å™¨               | ğŸ”— https://www.luogu.com.cn/problem/P2201           |
| Codeforces | 1073B - Vasya and Books        | ğŸ”— https://codeforces.com/problemset/problem/1073/B |
| Codeforces | 821C - Okabe and Boxes         | ğŸ”— https://codeforces.com/problemset/problem/821/C  |
| Codeforces | 26B - Regular Bracket Sequence | ğŸ”— https://codeforces.com/problemset/problem/26/B   |
| ä¸Šæµ·æœˆèµ›   | æ‹¬å·è®¡åˆ†                       | ğŸ”— https://iai.sh.cn/problem/679                    |

---

ğŸ§  **æç¤º**ï¼šå¤šåšé¢˜ç›®ï¼Œå¤šæ‰‹å†™æ¨¡æ‹Ÿï¼Œæœ‰åŠ©äºæ·±å…¥ç†è§£æ ˆçš„ç»“æ„ç‰¹æ€§ã€‚

---

ğŸ‰ å®Œæ•´æ ˆå­¦ä¹ ç¬”è®°åˆ°æ­¤ç»“æŸï¼ç¥ä½  AC ä¸åœï¼Œä»£ç é£èµ· ğŸš€ğŸš€ğŸš€