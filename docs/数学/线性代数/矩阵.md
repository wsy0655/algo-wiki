

本文介绍线性代数中一个非常重要的内容——矩阵，主要讲解矩阵的性质、运算，以及矩阵乘法的一些应用。

---

## 向量与矩阵

在线性代数中，向量可以分为**列向量**和**行向量**。

- 通常研究对象是**列向量**，用粗体小写字母表示，如 $\mathbf{v}$。
- 行向量通常表示方程或约束，可以用列向量的转置表示 $\mathbf{v}^\mathsf{T}$。
- 向量可以看作特殊的矩阵：列向量是 $n \times 1$ 的矩阵，行向量是 $1 \times n$ 的矩阵。
- 为了书写方便，有时向量上方的箭头可以省略，但理解方向时仍需注意。

---

## 引入矩阵

矩阵的引入来自于线性方程组。它体现了一种对数据和运算“打包处理”的思想。

例如，考虑线性方程组：

$$
\begin{cases}
x+2y=4\\
2x+y=6
\end{cases}
$$

---

### 视角一：几何理解

- 在平面直角坐标系中，每个方程对应一条直线。
- 两条直线的交点就是方程组的解：

  $$
  (x,y)=\left(\frac{8}{3},\frac{2}{3}\right)
  $$

- 每个方程相当于给解施加一个“约束”，交点是同时满足所有约束的点。

> ![](https://cdn.luogu.com.cn/upload/image_hosting/ap5iz0le.png)

---

### 视角二：列向量表示

将方程组表示为列向量形式：

$$
\mathbf{A} = \begin{bmatrix} x \\ 2x \end{bmatrix},\quad
\mathbf{B} = \begin{bmatrix} 2y \\ y \end{bmatrix},\quad
\mathbf{C} = \begin{bmatrix} 4 \\ 6 \end{bmatrix}
$$

方程组可写作：

$$
\mathbf{A} + \mathbf{B} = \mathbf{C}
$$

进一步分解成**固定向量的线性组合**：

$$
x\cdot \begin{bmatrix} 1 \\ 2 \end{bmatrix} + y\cdot \begin{bmatrix} 2 \\ 1 \end{bmatrix} = \begin{bmatrix} 4 \\ 6 \end{bmatrix}
$$

- 直观理解：在平面上有两条固定方向的向量

  $$
  \mathbf{u} = \begin{bmatrix} 1 \\ 2 \end{bmatrix},\quad
  \mathbf{v} = \begin{bmatrix} 2 \\ 1 \end{bmatrix}
  $$

  我们要找到系数 $x$ 和 $y$，使它们的线性组合得到目标向量 $\mathbf{C}$。

  

---

### 视角三：矩阵表示

将系数和未知数以及答案提取成矩阵：

$$
A = \begin{bmatrix} 1 & 2 \\ 2 & 1 \end{bmatrix},\quad
x = \begin{bmatrix} x \\ y \end{bmatrix},\quad
b = \begin{bmatrix} 4 \\ 6 \end{bmatrix}
$$

方程组可写作矩阵形式：

$$
A\cdot x = b
$$

- 矩阵乘以列向量的结果仍是列向量。
- 这一表示方式便于处理高维线性方程组，也与向量线性组合视角一致：

$$
A x = x\cdot \mathbf{u} + y\cdot \mathbf{v} = b
$$

---

### 矩阵乘法规则

矩阵乘法本质上是**线性组合和内积的推广**：

1. **行向量视角**：矩阵的每一行与列向量做内积，得到结果向量的对应元素。
2. **列向量视角**：矩阵乘以列向量可以看作矩阵的列向量按系数进行线性组合。

> 口诀：“左行右列”：行向量点列向量得到标量。

例如行向量视角：

$$
\begin{bmatrix} 1 & 2 \\ 2 & 1 \end{bmatrix} \begin{bmatrix} x \\ y \end{bmatrix} 
= \begin{bmatrix} 1\cdot x + 2\cdot y \\ 2\cdot x + 1\cdot y \end{bmatrix}
= \begin{bmatrix} 4 \\ 6 \end{bmatrix}
$$

- 这一规则保证矩阵乘以列向量与原方程组解一致。

例如列向量视角：

$$
\begin{bmatrix} 1 & 2 \\ 2 & 1 \end{bmatrix}
\begin{bmatrix} x \\ y \end{bmatrix}=
x\cdot \begin{bmatrix} 1 \\ 2 \end{bmatrix} + y\cdot \begin{bmatrix} 2 \\ 1 \end{bmatrix} = \begin{bmatrix} 4 \\ 6 \end{bmatrix}
$$


- 这一规则保证列向量左乘矩阵与视角二一致。


---

### 总结

- **列向量线性组合**：矩阵乘法可看作列向量的加权叠加。
- **行向量内积**：矩阵乘法可看作行向量与列向量的内积运算推广。
- **矩阵的几何意义**：矩阵乘以列向量相当于对向量进行线性变换（旋转、拉伸、投影等）。

矩阵乘法不仅方便表达线性方程组，也为高维向量和线性变换的研究奠定基础。

---




## 从矩阵乘向量到矩阵乘矩阵

我们已经知道，对于矩阵 $A$ 和列向量 $x$，矩阵乘以向量的运算可以理解为两种等价方式：

- **行向量内积视角**：每一行与 $x$ 做内积，得到结果向量的对应元素。

$$
A x = \begin{bmatrix} \text{row}_1(A) \cdot x \\ 
\text{row}_2(A) \cdot x \\ 
\vdots 
\end{bmatrix}
$$

- **列向量线性组合视角**：每一列向量按 $x$ 的系数加权叠加，得到结果列向量。

$$
A x = x_1 \mathbf{a}_1 + x_2 \mathbf{a}_2 + \dots + x_n \mathbf{a}_n
$$

这两种视角帮助我们直观理解矩阵如何作用于向量。

---

### 1️⃣ 引入矩阵乘矩阵的动机

假设我们有多个列向量 $x_1, x_2, \dots, x_p$，每个向量都要通过同一个矩阵 $A$ 变换：

$$
b_1 = A x_1,\quad b_2 = A x_2, \quad \dots \quad b_p = A x_p
$$

* 直接操作每个向量很繁琐。
* 我们可以把所有列向量组合成一个矩阵：

$$
X = [x_1, x_2, \dots, x_p]
$$

* 这样一次性变换可以写作：

$$
B = [b_1, b_2, \dots, b_p] = A X
$$

> **直观理解**：矩阵乘矩阵，其实就是矩阵乘以右边矩阵的每一列向量，得到新的列向量组成的矩阵。

---

### 2️⃣ 矩阵乘矩阵的列向量视角

回顾矩阵乘向量的列向量线性组合视角：

$$
A x = x_1 \mathbf{a}_1 + x_2 \mathbf{a}_2 + \dots + x_n \mathbf{a}_n
$$

* 如果右边是矩阵 $B = [b_1, b_2, \dots, b_p]$，每列都是向量，那么：

$$
A B = [A b_1, A b_2, \dots, A b_p]
$$

> **理解要点**：矩阵乘矩阵 = 将左矩阵作用于右矩阵的每一列，就像矩阵乘向量一样，只是批量操作。

---

### 3️⃣ 过渡到行列内积定义

在直观理解之后，我们可以给出矩阵乘法的标准定义：

**定义（矩阵乘法）**

若 $A \in \mathbb{R}^{m \times n}$，$B \in \mathbb{R}^{n \times p}$，则 $C = AB \in \mathbb{R}^{m \times p}$，其中元素

$$
c_{i,j} = \sum_{k=1}^n a_{i,k}\cdot b_{k,j} \quad \text{(第 $i$ 行与第 $j$ 列的内积)}
$$

直观对照：

  - 左矩阵每行与右矩阵每列做内积 $\rightarrow$ 得到对应元素。
  - 右矩阵每列可以看作列向量 $\rightarrow$ 左矩阵作用于每列向量。
  - 这也揭示了为何第一个矩阵的列数必须等于第二个矩阵的行数。
  
两种理解完全一致。

---

### 4️⃣ 小结

* **矩阵乘法核心逻辑** = “左行右列内积” + “右矩阵列向量线性组合”
* **矩阵乘向量** 是矩阵乘矩阵的特例（右矩阵只有一列）
* 理解了列向量视角和内积视角，就能直观地掌握矩阵乘法的本质，而不是直接死记公式。

---

好的，我来帮你把这些矩阵的定义和性质总结成一个清晰、结构化的表格或者列表，方便记忆和理解：

---

## 矩阵基本概念与类型总结

- **矩阵基本概念**
     - **矩阵 $A$**：由数字排列成的二维表格，大小为 $m \times n$。
     - **方阵**：行数等于列数的矩阵。
         - **$n$ 阶方阵**：$n$ 行 $n$ 列的方阵。
     - **主对角线**：方阵中从左上到右下的元素，即 $A_{i,i}$。
     - **单位矩阵 $I$**：方阵，主对角线元素为 $1$，其余元素为 $0$。
     - **同型矩阵**：行数和列数都相同的矩阵称为同型矩阵。
- **常用矩阵类型**
     - **对称矩阵**
         - 条件：$A_{i,j} = A_{j,i}$，即关于主对角线对称。
     - **对角矩阵**
         - 条件：主对角线之外的元素全为 $0$。
         - 记法：$\text{diag}\{\lambda_1, \cdots, \lambda_n\}$。
         - 特殊情况：
             - 所有对角线元素为 $1\rightarrow$ **单位矩阵 $I$**。
     - **三角矩阵**
         - **上三角矩阵**：主对角线下方元素为 $0$。
         - **下三角矩阵**：主对角线上方元素为 $0$。
         - 性质：
             - 两个上（下）三角矩阵的乘积仍是上（下）三角矩阵。
             - 对角线元素均非 $0\rightarrow$ 可逆，逆矩阵仍是上（下）三角矩阵。
     - **单位三角矩阵**
         - 条件：三角矩阵对角线全为 $1$。
         - 性质：
             - 两个单位上（下）三角矩阵的乘积仍为单位上（下）三角矩阵。
             - 单位上（下）三角矩阵可逆，逆矩阵仍为单位上（下）三角矩阵。

- **应用场景**
     - 一般矩阵：用于研究方程组、向量组、矩阵的秩。
     - 方阵：用于研究特征值、特征向量、二次型等问题。

---





## 矩阵运算总结

### 1. 矩阵的线性运算

- **内容**：加法、减法、数乘
- **规则**：
    - 只有同型矩阵可以相加减。
    - 运算逐元素进行。
    - 数乘：矩阵的每个元素都乘以这个数。

**例子**：

$$
A = \begin{bmatrix} 1 & 2 \\ 3 & 4 \end{bmatrix}, \quad 
B = \begin{bmatrix} 5 & 6 \\ 7 & 8 \end{bmatrix}
$$

- **加法**：

$$
A + B = \begin{bmatrix} 1+5 & 2+6 \\ 3+7 & 4+8 \end{bmatrix} = \begin{bmatrix} 6 & 8 \\ 10 & 12 \end{bmatrix}
$$

- **减法**：

$$
A - B = \begin{bmatrix} 1-5 & 2-6 \\ 3-7 & 4-8 \end{bmatrix} = \begin{bmatrix} -4 & -4 \\ -4 & -4 \end{bmatrix}
$$

- **数乘**（例如乘以 $2$）：

$$
2A = \begin{bmatrix} 2\cdot 1 & 2\cdot 2 \\ 2\cdot 3 & 2\cdot 4 \end{bmatrix} = \begin{bmatrix} 2 & 4 \\ 6 & 8 \end{bmatrix}
$$

---

### 2. **矩阵转置**

- **定义**：将矩阵的行与列互换，记作 $A^T$。
- **性质**：
    - 对称矩阵 $A = A^T$。

**例子**：

$$
A = \begin{bmatrix} 1 & 2 & 3 \\ 4 & 5 & 6 \end{bmatrix} \quad \Rightarrow \quad
A^T = \begin{bmatrix} 1 & 4 \\ 2 & 5 \\ 3 & 6 \end{bmatrix}
$$

---

### 3. **矩阵乘法**

- **定义**：
    - $A$ 为 $P \times M$ 矩阵，$B$ 为 $M \times Q$ 矩阵，则 $C = A\cdot B$ 是 $P \times Q$ 矩阵。
    - 公式：

$$
C_{i,j} = \sum_{k=1}^{M} A_{i,k} B_{k,j}
$$

- 口诀：**左行右列**。
- **性质**：
    - 满足结合律 $(AB)C = A(BC)$。
    - 不满足一般交换律 $AB \neq BA$。
    - 利用结合律，矩阵乘法可以利用 快速幂 的思想来优化。

在比赛中，由于线性递推式可以表示成矩阵乘法的形式，也通常用矩阵快速幂来求线性递推数列的某一项。

**例子**：

$$
A = \begin{bmatrix} 1 & 2 \\ 3 & 4 \end{bmatrix}, \quad 
B = \begin{bmatrix} 5 & 6 \\ 7 & 8 \end{bmatrix}
$$

$$
AB = \begin{bmatrix} 
1\cdot5 + 2\cdot7 & 1\cdot6 + 2\cdot8 \\ 
3\cdot5 + 4\cdot7 & 3\cdot6 + 4\cdot8 
\end{bmatrix} 
= \begin{bmatrix} 19 & 22 \\ 43 & 50 \end{bmatrix}
$$

---


## 代码实现


一般来说可以用一个二维数组来模拟矩阵，搭配重载运算符来模拟矩阵乘法等运算。


```cpp
struct matrix
{
    int mat[N][N];
    matrix()  // 构造函数
    {
        memset(mat, 0, sizeof(mat));
    }
};
matrix operator * (const matrix &a, const matrix &b)  // 矩阵乘法
{
    matrix c;
    for (int k = 0; k < N; k++)
    {
        for (int i = 0; i < N; i++)
        {
            for (int j = 0; j < N; j++)
            {
                c.mat[i][j] += a.mat[i][k] * b.mat[k][j];
            }
        }
    }
    return c;
}
```


> 代码中将上限都改为了 $N$，相当于矩阵都视为了 $N\times N$ 的方阵。实际做题自己调整。


____