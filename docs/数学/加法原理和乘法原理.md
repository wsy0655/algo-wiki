

在计数问题中，常用的两个基本原则是 **加法原理** 和 **乘法原理**，是进行统计计算的基本思想。

---

## 加法原理

英文：**Addition Principle**

如果完成一件事有 $n$ 种不相重处的方法，其中第 $i$ 种方法有 $a_i\$ 种形式，那么完成该事的总方案数是：

$$
S = a_1 + a_2 + \cdots + a_n
$$

### 需要注意

* 各种方法 **不能有重处**，即不一样的类型。

### 示例

* 从红色球罐中抽一个球有 $3$ 种选择，从绿色球罐中抽有 $4$ 种选择，如果只允许从一个罐里抽，那么抽法总数为：$3 + 4 = 7$

---

## 乘法原理

英文：**Multiplication Principle**

如果完成一项工作需要连续进行 $n$ 步，其中第 $i$ 步有 $a_i\$ 种选择，并且每一步之间 **相互独立**，那么完成该工作的总方案是：

$$
S = a_1 \times a_2 \times \cdots \times a_n
$$

### 需要注意

* 每步之间 **不依赖**，方法数不变
* 如果后续操作依赖于前面结果，需重新计算

### 示例

* 有 $3$ 件衣服，$2$ 条裤子，每次选择一套衣裤打扮，总方法为 $3 \times 2 = 6$

---

## 总结对比

| 原理   | 选择场景         | 情况      | 总数算法                                           |
| ---- | ------------ | ------- | ---------------------------------------------- |
| 加法原理 | 两个或多个相互独立的选择 | **或** 的关系  | $a_1 + a_2 + \cdots + a_n$                |
| 乘法原理 | 连续几步操作       | **并且** 的关系 | $a_1 \times a_2 \times \cdots \times a_n$ |

---

## 应用建议

* 先分析题目是 **或** 关系还是 **并且** 关系
* 如果是不同类型选一个，用 **加法原理**
* 如果是几步加结合，每步有选择，用 **乘法原理**
* 如果有重处，需要准确分组后再计

**计数算法是运算的思维，加法乘法是基础。学会分析各步的类型是解题的关键。**


### 经典例题

- [HNOI 2008] 越狱。

一个经典的容斥思想是：用总方案数减去不合法的方案数。


总方案数：即每个位置都有 $m$ 种选择，根据乘法原理：因此是 $m^n$。

不越狱的方案数：

- 第一个位置有 $m$ 种选择。
- 第二个位置有 $m-1$ 种选择。
- 第三个位置只需要和第二个不同即可，因此也是 $m-1$ 种选择。
- 以此类推，根据乘法原理：不越狱的方案数为 $m\cdot m^{n-1}$。


因此答案为

$$
m^n-m\cdot m^{n-1}
$$

使用快速幂即可实现。注意取余问题细节。