## ğŸ“Œ ä¸€ã€å‰ç¼€å’Œ

---

**ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ**

**ä»€ä¹ˆæ˜¯å‰ç¼€å’Œï¼Ÿ**  
æ•°åˆ—å‰ $i$ é¡¹çš„å’Œï¼š

$$
pre_i \;=\; a_1 + a_2 + \cdots + a_i
$$

> **å®ƒèƒ½åšä»€ä¹ˆï¼Ÿ**  
> - å¿«é€Ÿè·å–åŒºé—´å’Œã€åŒºé—´å†…è´¨æ•°/å¥‡æ•°/å¶æ•°ä¸ªæ•°ç­‰  
> - å¯æ‹“å±•è‡³ï¼šå‰ç¼€ç§¯ã€å‰ç¼€å¼‚æˆ–ç­‰

---

### ğŸ” ä¸€ç»´å‰ç¼€å’Œ

**1ï¸âƒ£ å®šä¹‰**

- ä»¤  
  $$
   pre_i = \sum_{j=1}^i a_j \quad\Longrightarrow\quad pre_i = a_1 + a_2 + \cdots + a_i
 $$
- ä¾‹å¦‚ï¼š  
  - $pre_1 = a_1$ 
  - $pre_2 = a_1 + a_2$  
  - $\cdots$ 
  - $pre_n = a_1 + a_2 + \cdots + a_n$

- **é€’æ¨å…³ç³»**  
  $$
   pre_i = pre_{i-1} + a_i
 $$

```cpp
// C++ ç¤ºä¾‹ï¼šç»´æŠ¤ä¸€ç»´å‰ç¼€å’Œ
for (int i = 1; i <= n; i++) 
{
    cin >> a[i];
    pre[i] = pre[i - 1] + a[i];
}
```


> ğŸ’¡ æ³¨æ„æ•°æ®èŒƒå›´æ˜¯å¦éœ€è¦ `long long`ã€‚

---

**æ€§è´¨**

- **åŒºé—´å’ŒæŸ¥è¯¢**  
  æ±‚åŒºé—´ $i \sim j$ å†…çš„æ•°å­—ä¹‹å’Œï¼Œå¯ä»¥ä½¿ç”¨  
  $$
  pre_j - pre_{i-1}
  $$  
  **è¯æ˜ï¼š**  


$$
\begin{aligned}
pre_j &= a_1 + a_2 + \cdots + a_{i-1} + a_i + \cdots + a_j,\\
pre_{i-1} &= a_1 + a_2 + \cdots + a_{i-1},\\
\Rightarrow\, pre_j - pre_{i-1} &= a_i + \cdots + a_j
\end{aligned}
$$

---

**å¸¸è§åº”ç”¨**

- **ç»™å®š $l, r$**  
  ç›´æ¥ç”¨  
  $$
  pre_r - pre_{l-1}
  $$  
  æŸ¥è¯¢åŒºé—´å’Œã€‚

- **å·²çŸ¥èµ·ç‚¹ $l$ å’ŒåŒºé—´é•¿åº¦ $len$**  
  ç»ˆç‚¹ä¸º $r = l + len - 1$ã€‚ç„¶åç”¨  
  $$
  pre_r - pre_{l-1}
  $$  
  æŸ¥è¯¢åŒºé—´å’Œã€‚

- **æ³¨æ„**  
  å‰ç¼€å’Œä¸ä»…ä»…å±€é™äº **å’Œ**ã€‚å®ƒä¸»è¦æ˜¯é¢„å¤„ç†çš„ç®—æ³•ï¼Œé€šè¿‡ä¸€æ®µå‰ç¼€å‡å»å¦ä¸€æ®µå‰ç¼€ï¼Œå¾—åˆ°æŸä¸€æ®µåŒºé—´çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š  
  - åŒºé—´å†…è´¨æ•°ä¸ªæ•°  
  - åŒºé—´å†…å¥‡æ•°/å¶æ•°ä¸ªæ•°/å«æœ‰ $3$ çš„æ•°å­—ä¸ªæ•°ç­‰  
  - åŒºé—´å¼‚æˆ–å€¼ç­‰

---

### ğŸ“š äºŒç»´å‰ç¼€å’Œ


**é¢„å¤„ç†ï¼šäºŒç»´å‰ç¼€å’Œ**

- **å®šä¹‰äºŒç»´å‰ç¼€å’Œæ•°ç»„**  
  ä»¤ $\displaystyle pre[i][j]$ è¡¨ç¤ºçŸ©é˜µ $a$ ä¸­å­çŸ©é˜µ $[1..\,i]\times [1..\,j]$ çš„å…ƒç´ ä¹‹å’Œï¼Œå³  
  $$
  pre[i][j]
  \;=\;
  \sum_{x=1}^{i} \sum_{y=1}^{j} a_{x,y},
  \quad 1 \le i \le n,\;1 \le j \le m.
  $$

- **é€’æ¨å…¬å¼**  
  
$$
pre[i][j]=pre[i-1][j]+pre[i][j-1]-pre[i-1][j-1]
+
a_{i,j}
$$

---

**æŸ¥è¯¢å…¬å¼ & æ—¶é—´å¤æ‚åº¦**

- **æŸ¥è¯¢å…¬å¼**  
  å¯¹äºä¸€æ¬¡æŸ¥è¯¢ $(x_1,y_1)$ åˆ° $(x_2,y_2)$ èŒƒå›´å†…çš„å­çŸ©é˜µå’Œï¼ŒæŒ‰ä¸‹å¼è®¡ç®—ï¼š  

$$\begin{aligned}
&\sum_{i=x_1}^{x_2} \sum_{j=y_1}^{y_2} a_{i,j}\\
=&pre[x_2][y_2]-pre[x_1-1][y_2]-pre[x_2][y_1-1]+pre[x_1-1][y_1-1].
\end{aligned}$$
  


- **æ—¶é—´å¤æ‚åº¦**  
  - é¢„å¤„ç†ï¼šæ„é€  $pre[i][j]$ éœ€è¦ $O(n \times m)$ã€‚  
  - æŸ¥è¯¢ï¼šæ¯æ¬¡å¸¸æ•°æ¬¡è®¿é—® $pre$ï¼Œ$O(1)$ï¼Œå…± $Q$ æ¬¡æ•… $O(Q)$ã€‚

---



## âœï¸ äºŒã€å·®åˆ†

---

### ğŸ” ä¸€ç»´å·®åˆ†

**ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ**

> **ä»€ä¹ˆæ˜¯å·®åˆ†ï¼Ÿ**  
> å·®åˆ†æ˜¯ä¸€ç§ä¸å‰ç¼€å’Œç›¸å¯¹çš„æŠ€å·§ï¼Œå¯è§†ä¸ºå‰ç¼€å’Œçš„é€†è¿ç®—ã€‚é€šè¿‡å·®åˆ†æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥é«˜æ•ˆåœ°å¤„ç†æŸäº›â€œåŒºé—´ä¿®æ”¹â€ç±»é—®é¢˜ã€‚  

- è®¾åŸæ•°ç»„ä¸º $a_1, a_2, \ldots, a_n$ï¼Œåˆ™å·®åˆ†æ•°ç»„ $b_1, b_2, \ldots, b_n$ å®šä¹‰ä¸ºï¼š
    
$$
\begin{cases}
  b_1 = a_1,\\
  b_i = a_i - a_{i-1}, \quad i = 2,3,\ldots,n.
\end{cases}
$$


- **ç¤ºä¾‹ï¼š**  
  - $b_1 = a_1$  
  - $b_2 = a_2 - a_1$ 
  - $b_3 = a_3 - a_2$ 
  - $\ldots$

---

**ğŸ”¹ æ€§è´¨ä¸€ï¼šå‰ç¼€è¿˜åŸåŸæ•°ç»„**

- **ç»“è®ºï¼š**  
  åŸæ•°ç»„ $a_i$ ç­‰äºå·®åˆ†æ•°ç»„ $b$ çš„å‰ç¼€å’Œï¼š  
  $$
  a_i = \sum_{j=1}^i b_j.
  $$
- **è¯æ˜ï¼š**  


$$
\begin{aligned}
a_n &= b_1 + b_2 + \cdots + b_n \\
    &= a_1 + (a_2 - a_1) + (a_3 - a_2) + \cdots + (a_n - a_{n-1}) \\
    &= a_n.
\end{aligned}
$$



> ä¾‹å¦‚ï¼š  
>
> $$
> \begin{aligned}
>   a_1 &= b_1,\\
>   a_2 &= b_1 + b_2 = a_1 + (a_2 - a_1),\\
>   a_3 &= b_1 + b_2 + b_3 = a_1 + (a_2 - a_1) + (a_3 - a_2).
> \end{aligned}
> $$

---

**ğŸ”¹ æ€§è´¨äºŒï¼šåŒºé—´åŠ æ³•ä¼˜åŒ–ï¼ˆæ ¸å¿ƒåº”ç”¨ï¼‰**

- **ç›®æ ‡ï¼š**  
  å°†åŸæ•°ç»„ä¸­åŒºé—´ $[l, r]$ å†…çš„æ‰€æœ‰å…ƒç´ å¢åŠ å¸¸æ•° $c$ã€‚  

- **å·®åˆ†åšæ³•ï¼š**  
  åªéœ€åœ¨å·®åˆ†æ•°ç»„ä¸Šæ‰§è¡Œä¸¤æ­¥ï¼Œæ—¶é—´ $O(1)$ï¼š  

$$
\begin{cases}
  b_l \;+=\; c,\\
  b_{r+1} \;-\!=\; c.
\end{cases}
$$  

  è¿™æ ·ï¼Œæ¢å¤åŸæ•°ç»„æ—¶ï¼Œ$$a_l,\dots,a_r$$ å…¨éƒ¨å¢åŠ  $c$ï¼Œå…¶å®ƒä½ç½®ä¸å˜ã€‚

---

**å…·ä½“è¯æ˜**

1. ä¿®æ”¹ $b_l += c$ åï¼š  
      - å¯¹äº $i < l$ï¼Œ$b_1,\dots,b_{l-1}$ éƒ½ä¸å˜ï¼Œæ•… $a_1,\dots,a_{l-1}$ ä¸å˜ã€‚  
      - å¯¹äº $i \ge l$ï¼Œ$b_l$ å˜ä¸º $b_l + c$ï¼Œæ¢å¤æ—¶ä» $a_l$ å¼€å§‹åˆ°æœ«å°¾éƒ½å¤šåŠ  $c$ã€‚  

2. å†æ‰§è¡Œ $b_{r+1} -= c$ï¼š  
      - å¯¹äº $i \le r$ï¼Œå·²ç»æ¯é¡¹å¤šåŠ  $c$ï¼Œæ•… $a_l,\dots,a_r$ æ­£ç¡®åŠ  $c$ã€‚  
      - å¯¹äº $i \ge r+1$ï¼Œåœ¨åŸæœ¬å·²åŠ  $c$ çš„åŸºç¡€ä¸Šå†å‡ $c$ï¼Œæ¢å¤åˆ°åŸå€¼ã€‚  

å› æ­¤ï¼Œåªæ”¹ $b_l$ å’Œ $b_{r+1}$ å³å¯å®ŒæˆåŒºé—´åŠ æ“ä½œã€‚

---

**ğŸ”¹ å·®åˆ†æ•°ç»„æ¨¡æ¿**

- **é¢„å¤„ç†å·®åˆ†æ•°ç»„**ï¼ˆè‹¥åˆå§‹ $a$ ä¸å…¨ $0$ï¼‰ï¼š  
   ```cpp
   for (int i = 1; i <= n; i++) 
   {
       cin >> a[i];
       b[i] = a[i] - a[i - 1]; // å·®åˆ†å®šä¹‰
   }
   ```
   > è‹¥åŸæ•°ç»„å…¨ä¸º $0$ï¼Œåˆ™å¯è·³è¿‡é¢„å¤„ç†ï¼Œç›´æ¥æ“ä½œ `b` æ•°ç»„ã€‚

---


- **åŒºé—´ä¿®æ”¹æ“ä½œï¼ˆå°† `[x, y]` èŒƒå›´å†…å…ƒç´ åŠ  `z`ï¼‰**ï¼š
```cpp
while (m--) 
{
    int x, y, z;
    cin >> x >> y >> z;
    b[x]     += z;
    b[y + 1] -= z;
}
```

- **è¿˜åŸåŸæ•°ç»„å¹¶æ±‚å€¼**

- æ–¹æ³•ä¸€ï¼šé€šè¿‡å‰ç¼€å’Œè¿˜åŸ $a$ï¼Œé¡ºä¾¿æ±‚æœ€å°/æœ€å¤§ç­‰ï¼š
  ```cpp
  int ans = 1e9;
  for (int i = 1; i <= n; i++) 
  {
      b[i] += b[i - 1]; // å‰ç¼€å’Œè¿˜åŸ a[i]
      ans = min(ans, b[i]);
  }
  ```
- æ–¹æ³•äºŒï¼šå…ˆæ¢å¤ `a[i] = a[i - 1] + b[i]`ï¼Œåœ¨åšå…¶ä»–è¿ç®—ï¼š
  ```cpp
  int ans = 1e9;
  for (int i = 1; i <= n; i++) 
  {
      a[i] = a[i - 1] + b[i]; // å‰ç¼€å’Œè¿˜åŸ a[i]
      ans = min(ans, a[i]);
  }
  ```

---

### ğŸ”¸ äºŒç»´å·®åˆ†




### âœ¨ ç­‰å·®æ•°åˆ—å·®åˆ†

---

**ğŸ¯ å‰ç½®çŸ¥è¯†ï¼šç­‰å·®æ•°åˆ—**

- **å®šä¹‰**ï¼šè‹¥ä¸€ä¸ªæ•°åˆ—ä»ç¬¬äºŒé¡¹èµ·ï¼Œæ¯é¡¹ä¸å‰ä¸€é¡¹çš„å·®éƒ½ç›¸åŒï¼Œåˆ™ç§°ä¸ºç­‰å·®æ•°åˆ—ã€‚è¯¥å·®å€¼ç§°ä¸ºâ€œå…¬å·®â€ $d$ã€‚  
- **è®°æ³•**ï¼šé¦–é¡¹ $a_1$ã€æœ«é¡¹ $a_n$ã€å…¬å·® $d$ã€‚  

**åŸºæœ¬å…¬å¼**ï¼š  
- ç­‰å·®æ•°åˆ—å‰ $n$ é¡¹å’Œï¼š  
  $$
  S_n = \frac{(a_1 + a_n)\times n}{2}.
  $$
- è‹¥å·²çŸ¥ $a_l$ ä¸ $a_r$ï¼Œåˆ™å…¬å·®ï¼š  
  $$
  d = \frac{a_r - a_l}{r - l}.
  $$

---

**ğŸ”¹ é¢˜æ„**

- ç»™å®š $m$ æ¬¡æ“ä½œï¼Œæ¯æ¬¡é€‰æ‹©åŒºé—´ $[l, r]$ï¼Œä½¿è¯¥åŒºé—´å†…æ‰€æœ‰æ•°å­—åŠ ä¸Šä¸€ä¸ªç­‰å·®æ•°åˆ—ï¼Œé¦–é¡¹ä¸º $s$ã€æœ«é¡¹ä¸º $e$ã€‚  
- ç”±æ­¤å¯ç®—å‡ºå…¬å·®ï¼š  
  $$
  d = \frac{e - s}{r - l}.
  $$

---

**ğŸ”¹ äºŒæ¬¡å·®åˆ†å¼•å…¥**

1. **ä¸€æ¬¡å·®åˆ†**ï¼š  
   $$
   b_i = a_i - a_{i-1}.
   $$
2. **äºŒæ¬¡å·®åˆ†**ï¼š  
   $$
   c_i = b_i - b_{i-1}.
   $$
3. å½“å¯¹åŒºé—´ $[l, r]$ å¢åŠ ç­‰å·®æ•°åˆ—æ—¶ï¼Œåªæœ‰å°‘æ•°å‡ ä¸ªä½ç½®çš„ $b$ å’Œ $c$ ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå…·ä½“å¦‚ä¸‹ï¼š

---

**ğŸ”¸ äºŒæ¬¡å·®åˆ†ç¤ºæ„**

å‡è®¾åœ¨ $[l, r]$ åŒºé—´åŠ ç­‰å·®æ•°åˆ—ï¼Œé¦–é¡¹ $s$ã€æœ«é¡¹ $e$ã€å…¬å·® $d$ã€‚åˆ™ï¼š


| ä¸‹æ ‡             | $l - 1$ | $l$            | $l + 1$    | $\cdots$ | $r$         | $r + 1$         | $r + 2$       |
|:----------------:|:---------:|:----------------:|:------------:|:----------:|:-------------:|:-----------------:|:---------------:|
| **åŸæ•°ç»„ $a$ å¢é‡** | 0         | $\color{red}{ s}$      | $\color{red}{s + d}$ | $\cdots$   | $\color{red}{e}$      | 0                 | 0               |
| **ä¸€æ¬¡å·®åˆ† $b$**   | 0         | $\color{red}{s }$      | $\color{red}{d}$      | $\cdots$   | $\color{red}{d}$      | $\color{red}{-e}$    | 0               |
| **äºŒæ¬¡å·®åˆ† $c$**   | 0         | $\color{red}{s}$      | $\color{red}{d - s}$  | 0            | 0             | $\color{red}{-(e + d)}$ | $\color{red}{e}$     |

> **åªéœ€ç»´æŠ¤** $c_l, c_{l+1}, c_{r+1}, c_{r+2}$ å››ä¸ªä½ç½®ï¼Œæ¢å¤æ—¶åšä¸¤æ¬¡å‰ç¼€å’Œå³å¯å¾—åˆ°åŸæ•°ç»„ $a$ã€‚



---

**ğŸ”¹ å®Œæ•´ä»£ç ï¼ˆ1D ç­‰å·®æ›´æ–° + äºŒæ¬¡å·®åˆ†ï¼‰**

```cpp
// è¯»å…¥ n, m çœç•¥
// c[] ä¸ºäºŒæ¬¡å·®åˆ†æ•°ç»„ï¼Œb[] ä¸ºä¸€æ¬¡å·®åˆ†æ•°ç»„ï¼Œa[] ä¸ºåŸæ•°ç»„
while (m--) 
{
    int l, r, s, e;
    cin >> l >> r >> s >> e;
    long long d = (e - s) / (r - l); // è®¡ç®—å…¬å·®
    c[l]     += s;
    c[l + 1] += d - s;
    c[r + 1] += -(e + d);
    c[r + 2] += e;
}
// æ¢å¤ï¼šå…ˆé€šè¿‡ä¸€æ¬¡ç´¯åŠ è¿˜åŸ bï¼Œå†é€šè¿‡ä¸€æ¬¡ç´¯åŠ è¿˜åŸ a
for (int i = 1; i <= n; i++) 
{
    b[i] = b[i - 1] + c[i];    // ä¸€æ¬¡å‰ç¼€å’Œè¿˜åŸåˆ° b
    a[i] = a[i - 1] + b[i];    // äºŒæ¬¡å‰ç¼€å’Œè¿˜åŸåˆ° a
}
```

â± æ—¶é—´å¤æ‚åº¦ï¼š$O(n+m)$ã€‚


## ğŸ“Œ ä¸‰ã€ç¦»æ•£åŒ–

---

**ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ**

> **ä»€ä¹ˆæ˜¯ç¦»æ•£åŒ–ï¼Ÿ**  
> å°†åŸæ¥å€¼åŸŸå¾ˆå¤§çš„æ•°æ®ï¼Œ**æ˜ å°„åˆ°ä¸€ä¸ªè¿ç»­å°èŒƒå›´å†…**ï¼Œä¾¿äºå¼€æ•°ç»„ã€ä½¿ç”¨æ ‘çŠ¶æ•°ç»„ã€çº¿æ®µæ ‘ç­‰ã€‚

- ä½œç”¨ï¼šå°†ç¨€ç–çš„ä¸‹æ ‡å‹ç¼©æˆå¯†é›†çš„å°æ•´æ•°åŒºé—´ã€‚

---

**ğŸ”¹ ç¦»æ•£åŒ–æ­¥éª¤**

1. **æ”¶é›†æ‰€æœ‰å¾…ç¦»æ•£åŒ–çš„åæ ‡**  
   - å°†æ¯ä¸ªæ“ä½œæˆ–æŸ¥è¯¢ä¸­å‡ºç°çš„åæ ‡å€¼ï¼ˆå¦‚åŒºé—´ç«¯ç‚¹ã€æŸ¥è¯¢ç‚¹ï¼‰éƒ½åŠ å…¥ä¸€ä¸ªæ•°ç»„ `lsh` ä¸­ã€‚

2. **æ’åºå¹¶å»é‡**  
   ```cpp
   sort(lsh.begin(), lsh.end());
   lsh.erase(unique(lsh.begin(), lsh.end()), lsh.end());
   ```
3. **äºŒåˆ†æŸ¥æ‰¾æ˜ å°„**  
   å¯¹äºä»»æ„åŸåæ ‡ `x`ï¼Œä½¿ç”¨  
    ```cpp
    int idx = lower_bound(lsh.begin(), lsh.end(), x) - lsh.begin() + 1;
    ```




## â­ï¸ å››ã€å’Œå¼å…¥é—¨ä¸æŠ€å·§

---

**ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ**



**ä»€ä¹ˆæ˜¯å’Œå¼ï¼Ÿ**  

ç”¨ âˆ‘ è¡¨ç¤ºâ€œè¿ç»­ç›¸åŠ â€çš„è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ï¼š  

$$
\sum_{i=1}^n i = 1 + 2 + 3 + \dots + n
$$  

åµŒå¥—ç¤ºä¾‹ï¼š  

$$
\sum_{i=1}^n \sum_{j=1}^m a_{i,j}
$$

- åœ¨ç®—æ³•ç«èµ›ä¸­ï¼Œå’Œå¼å¸¸ç”¨æ¥è¡¨ç¤ºå¾ªç¯ç´¯åŠ è¿‡ç¨‹ï¼Œç®€åŒ–ç‰ˆå³åŒ–ä¸ºå…¬å¼è®¡ç®—ã€‚

---

**ğŸ”¹ åŸºæœ¬æ€§è´¨**

1. **å¯æ‹†åˆ†ï¼ˆåŒºé—´æ‹†åˆ†ï¼‰**  
   
$$
\begin{aligned}
&\sum_{i=1}^{n} a_i \\
=&\sum_{i=1}^{m} a_i+\sum_{i=m+1}^{n} a_i.
\end{aligned}
$$

2. **å¯åˆ†é…ï¼ˆåŠ æ³•ï¼‰**  

$$
\begin{aligned}
&\sum_{i=1}^{n} (a_i + b_i) 
=&\sum_{i=1}^{n} a_i +\sum_{i=1}^{n} b_i.
\end{aligned}
$$

3. **å¸¸æ•°å¯æå–**  
  
$$
\sum_{i=1}^{n} k \,a_i =k \sum_{i=1}^{n} a_i.
$$

---

**ğŸ”¹ ä¾‹é¢˜ä¸åŒ–ç®€æŠ€å·§**

**ä¾‹é¢˜ 1 ï¼šæ¯ä¸ªæ•°è¢«åŠ äº†å‡ æ¬¡ï¼Ÿ**

- è®¾ $a_1, a_2, \dots, a_n$ æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚åŒ–ç®€  

$$
\sum_{i=1}^n \sum_{j=i}^n a_i.
$$

- **è§‚å¯Ÿ**ï¼šå†…å±‚å’Œä¸ $j$ ç›¸å…³ï¼Œä½† $a_i$ ä¸ä¾èµ– $j$ï¼Œå¯æå–ï¼š  

$$
\begin{aligned}
&\sum_{i=1}^n a_i \sum_{j=i}^n 1 \\
= &\sum_{i=1}^n a_i \cdot (n - i + 1).
\end{aligned}
$$

å¤æ‚åº¦ä» $O(n^2)$ é™ä¸º $O(n)$ã€‚

---

**ä¾‹é¢˜ 2 ï¼šåµŒå¥—æ±‚å’Œ**

- åŒ–ç®€  
  
$$
\sum_{i=1}^n \sum_{j=i}^n (a_i \times j).
$$

- æå– $a_i$ï¼š  

$$
\begin{aligned}
&\sum_{i=1}^n a_i \sum_{j=i}^n j\\
=&\sum_{i=1}^n a_i \times \frac{(i + n)(n - i + 1)}{2}.
\end{aligned}
$$

---

**ğŸ”¹ äº¤æ¢æ±‚å’Œæ¬¡åºï¼ˆé‡è¦æŠ€å·§ï¼‰**

- äº¤æ¢å‰ï¼š  

$$
\sum_{i=1}^{n} \sum_{j=i}^{n} f(i, j).
$$

- äº¤æ¢é¡ºåºï¼š  

$$
= \sum_{j=1}^{n} \sum_{i=1}^{j} f(i, j).
$$

> â˜… æœ‰æ—¶äº¤æ¢é¡ºåºåæ›´æ˜“åŒ–ç®€ã€‚

---

**ä¾‹é¢˜ 3 ï¼šæ¢åºç®€åŒ–**

- $\displaystyle \sum_{i=1}^n \sum_{j=1}^i j$  
- **äº¤æ¢å‰å«ä¹‰**ï¼š  
  $(1) + (1 + 2) + (1 + 2 + 3) + \cdots + (1 + 2 + \cdots + n)$.  
- **äº¤æ¢å**ï¼š  

$$
\sum_{j=1}^n \sum_{i=j}^n j = \sum_{j=1}^n j \cdot (n - j + 1).
$$

---

**ä¾‹é¢˜ 4 ï¼šåŒé‡å’Œå¼**

$$\begin{aligned}
        &\sum\limits_{i=1}^n \sum\limits_{j=i}^n a_i\times a_j\\ 
        =&\sum\limits_{j=1}^n \sum\limits_{i=1}^j a_i\times a_j\\
        =&\sum\limits_{j=1}^n a_j \sum\limits_{i=1}^j a_i\\
        =&\sum\limits_{j=1}^n a_j\times pre[j]
    \end{aligned}$$