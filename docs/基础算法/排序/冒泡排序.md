## 定义


冒泡排序（英语：Bubble sort）是一种简单的排序算法。由于在算法的执行过程中，较小的元素像是气泡般慢慢「浮」到数列的顶端，故叫做冒泡排序。


## 过程

它的工作原理是每次检查相邻两个元素，如果前面的元素与后面的元素满足给定的排序条件（例如当 $a[i]>a[i+1]$），就将相邻两个元素交换。当没有相邻的元素需要交换时，排序就完成了。

经过 $i$ 次扫描后，数列的末尾 $i$ 项必然是最大的 $i$ 项，因此冒泡排序最多需要扫描 
$n-1$ 遍数组就能完成排序。


## 示例


以序列 $a=[5,4,1,3,2]$ 为例。

- 第一轮扫描：
    - $a[1]>a[2]$，交换 $a[1]$ 和 $a[2]$。得到 $a=[4,5,1,3,2]$
    - $a[2]>a[3]$，交换 $a[2]$ 和 $a[3]$。得到 $a=[4,1,5,3,2]$
    - $a[3]>a[4]$，交换 $a[3]$ 和 $a[4]$。得到 $a=[4,1,3,5,2]$
    - $a[4]>a[5]$，交换 $a[4]$ 和 $a[5]$。得到 $a=[4,1,3,2,5]$
    - 冒泡排序完成一次扫描，得到 $a=[1,4,3,2,5]$。可以看出最大数字冒到了最后一位。
- 第二轮扫描：
    - $a[1]>a[2]$，交换 $a[1]$ 和 $a[2]$。得到 $a=[1,4,3,2,5]$
    - $a[2]>a[3]$，交换 $a[2]$ 和 $a[3]$。得到 $a=[1,3,4,2,5]$
    - $a[3]>a[4]$，交换 $a[3]$ 和 $a[4]$。得到 $a=[1,3,2,4,5]$
    - 冒泡排序完成一次扫描，得到 $a=[1,3,2,4,5]$。可以看出第二大数字冒到了倒数第二位。

可以看出长度为 $5$ 的序列经过四轮扫描就可以结束。


## 具体实现


- 遍历轮数：$i$，其中 $i\in [1,n-1]$。
- 每一轮，从前往后扫描整个序列。
    - 遍历整个序列，用 $j$ 当索引。其中 $j\in [1,n-i]$。
    - 当满足 $a[j]>a[j+1]$ 时，交换两个元素。

**伪代码**

$$\begin{array}{ll}
1 & \textbf{for } i\gets 1\textbf{ to }n-1\\
2 & \qquad \textbf{for }j\gets 1\textbf{ to }n-i\\
3 & \qquad\qquad\textbf{if }A[j]>A[j+1]\\
4 & \qquad\qquad\qquad \text{swap }A[j]\text{ and }A[j+1]\\
\end{array}$$


> 为何 $j$ 只需要遍历到 $n-i$ 呢？
>
> 因为当 $i$ 递增时，已经排序的元素就会越排越靠后，因此 $j$ 遍历的范围就会越来越小。
>
> 例如当 $i=1$ 时，$j$ 遍历的范围为 $1$ 到 $n-1$，则最多只需要比较 $a[n-1]$ 与 $a[n]$ 的关系。
> 
> 当 $i=2$ 时，$j$ 遍历的范围为 $1$ 到 $n-2$，则最多只需要比较 $a[n-2]$ 与 $a[n-1]$ 的关系。因为此时最大的元素已经排好序在 $a[n]$ 不会再动了。



## 性质
### 稳定性

冒泡排序是一种稳定的排序算法。

### 时间复杂度

在序列完全有序时，冒泡排序只需遍历一遍数组，不用执行任何交换操作，时间复杂度为 $O(n)$。

在最坏情况下，冒泡排序要执行 $\frac{(n-1)n}{2}$ 次交换操作，时间复杂度为 $O(n^2)$。

冒泡排序的平均时间复杂度为 $O(n^2)$。


