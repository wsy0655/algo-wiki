

## 引入

在实际开发中，我们经常需要将多个不同类型的数据组合在一起描述一个完整的对象。例如，一个学生的资料可能包括姓名、年龄、分数等信息。

如果没有结构体，我们只能定义多个变量：

```cpp
string name;
int age;
double score;
```

这样不仅不便于管理，还容易出错。而结构体允许我们将这些相关的数据组合成一个整体，使代码更清晰、逻辑更清楚，便于维护。

---

## 定义结构体

结构体（`struct`）是用于将多个不同类型的数据组合在一起的一种用户自定义类型。

```cpp
struct Student 
{
    string name;
    int age;
    double score;
};
```

- 其中 `Student` 是结构体的名称，它可以是任何有效的标识符（变量名）。

> 简单解释即自定义了一个新类型，名字叫做 Student

注意：结构体定义结束后需要有分号 `;`。

---

### 结构体变量的定义

```cpp
Student s1;                     // 定义一个结构体变量
Student s2 = {"Tom", 18, 92.5}; // 初始化结构体变量
```

也可以定义多个变量：

```cpp
struct Student 
{
    string name;
    int age;
    double score;
} s3, s4;
```

---

### 访问结构体成员

使用点号 `.` 来访问结构体成员：

```cpp
s1.name = "Alice";
s1.age = 17;
s1.score = 88.5;

cout << s1.name << " " << s1.age << " " << s1.score;
```

---

### 结构体数组

可以定义结构体数组来存储多个结构体元素：

```cpp
Student a[105]; // 存储最多 105 个学生信息

int n;
cin >> n;
for (int i = 1; i <= n; i++)
{
    cin >> a[i].name >> a[i].age >> a[i].score;
}
```

---

### 结构体作为函数参数

可以将结构体作为参数传入函数：

```cpp
struct Student
{
    string name;
    int age;
    double score;
};
void print(Student s) 
{
    cout << s.name << " " << s.age << " " << s.score << endl;
}

int main() 
{
    Student x = {"Bob", 16, 85.0};
    print(x);
    return 0;
}
```



结构体是 C++ 中非常常用的基础构造类型，尤其在处理多个相关字段时非常有用。


___



## 结构体排序


结构体是信息学竞赛中非常常见的数据结构，结构体排序更是常考基础操作。本文将从竞赛角度讲解结构体排序的技巧、常见用法与题型示例。

---

### 预备知识：sort 函数的第三个参数

在 C++ 中，`sort` 函数可以用于排序数组，它的语法如下：

```cpp
sort(起始地址, 结束地址, 比较函数);
```

例如我们要对一个 `int` 数组从大到小排序：

```cpp
#include <bits/stdc++.h>
using namespace std;
int n, a[105];
bool cmp(int x, int y) 
{
    return x > y; // 降序
}
int main()
{
    cin >> n;
    for (int i = 1; i <= n; i++) cin >> a[i];
    sort(a + 1, a + n + 1, cmp);
    for (int i = 1; i <= n; i++) cout << a[i] << " ";
    return 0;
}
```

**解释：**

- `a + 1` 是起始地址，`a + n + 1` 是结束地址（不包含）
* 第三个参数是一个**比较函数**，返回 `true` 表示 `x` 应排在 `y` 前面
* 若省略第三个参数，则默认使用 `<` 比较，得到升序排序

这在结构体排序中也一样适用，只不过我们需要自定义结构体的比较方式。

---

### 引入：结构体排序的意义

在实际题目中，我们经常需要按照多个条件对数据进行排序。比如：

> 有若干名学生，每人有语文成绩和总成绩。
> 要求先按语文成绩升序排序，若语文成绩相同，则按总成绩降序排序。

这类问题中，单靠基本数组或双重排序是无法高效解决的。我们需要借助**结构体**来封装每个学生的多个字段，然后使用自定义规则排序。

---

### 结构体排序的基本语法（C++）

我们不能直接使用 `sort(a + 1, a + n + 1);` 或 `sort(a, a + n);` 来对结构体数组排序，因为结构体并不支持默认的比较运算。

- 结构体是自定义的类型，不能直接使用 `<` 或 `>` 进行比较。
  
    ```cpp
    struct Student 
    {
        int chinese; // 语文成绩
        int total; // 总分
    };
    int main()
    {
        Student s1 = {90, 300};
        Student s2 = {85, 290};
        // 错误：不能直接比较结构体
        if (s1 < s2) { ... } // 编译错误
    }
    ```

- 必须自定义一个比较函数来定义排序规则。

必须自定义一个比较函数，通过 `sort` 的 **第三个参数** 传入。

___

### 示例：按语文升序，总分降序排序

```cpp
struct Student 
{
    int chinese; // 语文成绩
    int total; // 总分
} a[105];

bool cmp(Student a, Student b) 
{
    if (a.chinese != b.chinese) 
        return a.chinese < b.chinese;
    else 
        return a.total > b.total;
}
int main() 
{
    int n;
    cin >> n;
    for (int i = 1; i <= n; i++) 
        cin >> a[i].chinese >> a[i].total;
    sort(a + 1, a + n + 1, cmp); // 使用自定义比较函数
    for (int i = 1; i <= n; i++) 
        cout << a[i].chinese << " " << a[i].total << endl;
    return 0;
}
```

解释：

* `sort` 是 C++ STL 提供的排序函数，默认只支持基本类型
* 结构体需要自定义比较方式，作为 `sort` 的第三个参数传入

---


### 总结

结构体排序在信息学竞赛中非常常见，是基础数据处理的关键技能。熟练掌握以下几点尤为重要：

* 灵活使用自定义 cmp 函数
* 多关键字排序的结构
* 注意返回值和比较方向

熟能生巧，多练习是关键！


___


## 系统自带的结构体


C++ STL 中提供了一个内置的结构体模板：`pair<type1, type2>`，用于存储两个相关的数据项，例如键值对。

例如：


- `pair<int, string> a;` 定义了一个包含整数和字符串的结构体。
- `pair<int, int> b;` 定义了一个包含两个整数的结构体。

访问结构体的成员：

```cpp
pair<int, string> a;
a.first = 1;   // 设置第一个元素
a.second = "Hello"; // 设置第二个元素
cout << a.first << " " << a.second; // 输出第一个和第二个元素
```


- `pair<int, int> a = {1, 2}`。

### 优点

`pair` 提供了默认的比较方式。可以直接使用 `<` 和 `>` 进行比较

- **默认比较方式**：先比较第一个元素，若相同再比较第二个元素。

```cpp
pair<int, int> a = {1, 2};
pair<int, int> b = {1, 3};
if (a < b) // 比较 a 和 b
{
    cout << "a < b" << endl;
}
else
{
    cout << "a >= b" << endl;
}
```

在这个例子中，$a\geq b$。

___


**使用 pair 进行排序**

```cpp
#include <bits/stdc++.h>
using namespace std;
int n;
pair<int, int> a[105];
int main()
{
    cin >> n;
    for (int i = 1; i <= n; i++)
    {
        cin >> a[i].first >> a[i].second; // 输入第一个和第二个元素
    }
    sort(a + 1, a + n + 1); // 使用默认比较方式排序
    for (int i = 1; i <= n; i++)
    {
        cout << a[i].first << " " << a[i].second << endl; // 输出排序结果
    }
}
```

___


### 缺点

`pair` 只能存储两个元素，如果需要存储多个元素，则需要使用结构体或 `pair` 的嵌套。


- `pair<int, pair<int, int>>` 可以存储三个元素，但不如结构体直观。
- 注意 `pair<int, int, int>` 这种形式是非法的，因为 `pair` 只能有两个元素。