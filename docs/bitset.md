## ğŸ“Œbitset


### ğŸ§  ç®€è¿°

- $\texttt{bitset}$ æ˜¯ C++ æ ‡å‡†åº“ä¸­çš„é«˜æ•ˆä½å®¹å™¨ï¼Œç”¨äºå­˜å‚¨å›ºå®šå¤§å°çš„äºŒè¿›åˆ¶æ•°æ®ï¼ˆ$0/1$ï¼‰
- æä¾›æ¥è¿‘ç¡¬ä»¶çº§åˆ«çš„ä½æ“ä½œæ€§èƒ½ï¼Œç‰¹åˆ«é€‚åˆçŠ¶æ€å‹ç¼©å’Œå¸ƒå°”è¿ç®—

**å­˜å‚¨åŸç†**

- å†…å­˜æŒ‰å­—èŠ‚å¯»å€ï¼Œæ™®é€š $\texttt{bool}$ ç±»å‹æ¯ä¸ªå€¼å ç”¨ $1$ å­—èŠ‚ï¼ˆ$8$ æ¯”ç‰¹ï¼‰
- $\texttt{bitset}$ é€šè¿‡ä½å‹ç¼©æŠ€æœ¯ï¼Œæ¯ä¸ªæ¯”ç‰¹å­˜å‚¨ä¸€ä¸ª $0/1$ å€¼



**ç©ºé—´æ•ˆç‡**

å­˜å‚¨å•ä¸ª $0/1$ å€¼ä»…éœ€ $1$ ä½ç©ºé—´

- ç›¸æ¯” $\texttt{int}$ ç±»å‹ï¼ˆ$32$ ä½/å€¼ï¼‰ï¼Œç©ºé—´åˆ©ç”¨ç‡æå‡ $32$ å€
- ç›¸æ¯” $\texttt{bool}$ æ•°ç»„ï¼ˆ$8$ ä½/å€¼ï¼‰ï¼Œç©ºé—´åˆ©ç”¨ç‡æå‡ $8$ å€


**æ€§èƒ½ä¼˜åŠ¿**

- å•æ¡æœºå™¨æŒ‡ä»¤å¯åŒæ—¶å¤„ç† $32/64$ ä½æ•°æ®ï¼ˆä½çº§å¹¶è¡Œï¼‰
- æ‰¹é‡æ“ä½œï¼ˆå¦‚ç§»ä½ã€ä½è¿ç®—ï¼‰æ—¶é—´å¤æ‚åº¦ä¸º $O(n/w)$
  - $w$ = æœºå™¨å­—é•¿ï¼ˆ$32$ ä½æˆ– $64$ ä½ï¼‰
  - ç†è®ºåŠ é€Ÿæ¯”æœ€é«˜å¯è¾¾ $w$ å€







### ğŸ“˜ åˆ›å»ºå’Œåˆå§‹åŒ–

$\texttt{bitset}$ çš„å¤§å°æ˜¯åœ¨å®šä¹‰æ—¶æŒ‡å®šçš„ï¼Œä¸”å¤§å°ä¸å¯ä¿®æ”¹ã€‚

å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²æˆ–æ•°å­—æ¥åˆå§‹åŒ– $\texttt{bitset}$ã€‚

```cpp
bitset<8> b1;           // é»˜è®¤åˆå§‹åŒ–ä¸º 00000000
bitset<8> b2("10101010"); // ä»äºŒè¿›åˆ¶å­—ç¬¦ä¸²åˆå§‹åŒ–
bitset<8> b3(10);        // ä»æ•´æ•°åˆå§‹åŒ–ï¼Œ10 çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º 00001010
```

**è¾“å‡ºï¼š**

```cpp
cout << b1 << endl; // è¾“å‡º: 00000000
cout << b2 << endl; // è¾“å‡º: 10101010
cout << b3 << endl; // è¾“å‡º: 00001010
```


**æ”¯æŒçš„è¿ç®—ç¬¦**

ä¾‹å¦‚å®šä¹‰ $\texttt{bitset<8> b2("10101010")}$ã€‚


- $\texttt{[]}$: è®¿é—®å…¶ç‰¹å®šçš„ä¸€ä½ã€‚ä¾‹ï¼š$\texttt{cout << b[3]}$ã€‚
- $\texttt{==}$ å’Œ $\texttt{!=}$ï¼šæ¯”è¾ƒä¸¤ä¸ª $\texttt{bitset}$ å†…å®¹æ˜¯å¦å®Œå…¨ä¸€æ ·ã€‚
- ä½è¿ç®—ã€‚$\texttt{bitset}$ åªèƒ½ä¸ $\texttt{bitset}$ è¿›è¡Œä½è¿ç®—ï¼Œè‹¥è¦å’Œæ•´å‹è¿›è¡Œä½è¿ç®—ï¼Œè¦å…ˆå°†æ•´å‹è½¬æ¢ä¸º $\texttt{bitset}$ã€‚

æ­¤å¤–ï¼Œ$\texttt{bitset}$ è¿˜æä¾›äº† `C++` æµå¼ `IO` çš„æ”¯æŒï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡ $\texttt{cin/cout}$ è¿›è¡Œè¾“å…¥è¾“å‡ºã€‚


```cpp
bitset<8> bs;
cin >> bs; // è¾“å…¥å¿…é¡»æ˜¯ 01 å­—ç¬¦ä¸²ï¼Œä¸”é•¿åº¦å’Œ bitset å¤§å°åŒ¹é…ã€‚
cout << bs;
int num;
cin >> num;
bitset<32> bs(num); // å°†æ•´æ•°è½¬æ¢ä¸º 32 ä½ bitset
```


### âš™ï¸ å¸¸è§å‡½æ•°


$\texttt{bitset}$ æä¾›äº†è®¸å¤šå†…ç½®å‡½æ•°ç”¨äºæ“ä½œå’ŒæŸ¥è¯¢äºŒè¿›åˆ¶æ•°æ®ã€‚

- $\texttt{count()}$ï¼šè¿”å› $\texttt{bitset}$ ä¸­ 1 çš„ä¸ªæ•°ã€‚
- $\texttt{size()}$ï¼šè¿”å› $\texttt{bitset}$ çš„å¤§å°ã€‚
- $\texttt{any()}$ï¼šå¦‚æœ $\texttt{bitset}$ ä¸­å­˜åœ¨ $1$ï¼Œåˆ™è¿”å› `true`ã€‚
- $\texttt{none()}$ï¼šå¦‚æœ $\texttt{bitset}$ ä¸­æ‰€æœ‰ä½éƒ½ä¸º $0$ï¼Œè¿”å› `true`ã€‚
- $\texttt{all()}$ï¼šå¦‚æœ $\texttt{bitset}$ ä¸­æ‰€æœ‰ä½éƒ½ä¸º $1$ï¼Œè¿”å› `true`ã€‚
- $\texttt{flip()}$ï¼šåè½¬æ‰€æœ‰ä½ã€‚$\texttt{b.flip(pos)}$ï¼šç¿»è½¬æŸä¸€ä½ã€‚
- $\texttt{set()}$ï¼šå°†æ‰€æœ‰ä½è®¾ä¸º $1$ã€‚$\texttt{b.set(pos, true/false)}$ï¼šè®¾ç½®æŸä¸€ä½çš„å€¼ã€‚
- $\texttt{reset()}$ï¼šå°†æ‰€æœ‰ä½è®¾ä¸º $0$ã€‚$\texttt{b.reset(pos)}$ï¼šè®¾ç½®æŸä¸€ä½ä¸º `false`ã€‚
- $\texttt{to\_string()}$ï¼šå°† $\texttt{bitset}$ è½¬æ¢ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚
- $\texttt{to\_ulong()}$ï¼šè¿”å›è½¬æ¢æˆçš„ $\texttt{unsigned long}$ è¡¨è¾¾ã€‚
- $\texttt{to\_ullong()}$ï¼šè¿”å›è½¬æ¢æˆçš„ $\texttt{unsigned long long}$ è¡¨è¾¾ã€‚




```cpp
bitset<8> b("10101010");
cout << b.count() << endl;  // è¾“å‡º: 4 (1 çš„æ•°é‡)
cout << b.size() << endl; // è¾“å‡ºï¼š8
cout << b.any() << endl;  // è¾“å‡º: 1 (å­˜åœ¨ 1)
cout << b.none() << endl; // è¾“å‡º: 0 (å­˜åœ¨ 1)
cout << b.all() << endl; // è¾“å‡ºï¼š0ï¼ˆå­˜åœ¨ 0ï¼‰
b.flip(); // b.flip(5)
b.set(); // b.set(5, 1)
b.reset(); // b.reset(5)
```

**ğŸ§© å¸¸ç”¨å‡½æ•°**

| å‡½æ•°              | è¯´æ˜                      | ç¤ºä¾‹              |
| --------------- | ----------------------- | --------------- |
| `count()`       | è¿”å› 1 çš„æ•°é‡                | `b.count()`     |
| `size()`        | è¿”å›æ€»ä½æ•°                   | `b.size()`      |
| `any()`         | æ˜¯å¦è‡³å°‘æœ‰ä¸€ä½ä¸º 1              | `b.any()`       |
| `none()`        | æ˜¯å¦å…¨ä¸º 0                  | `b.none()`      |
| `all()`         | æ˜¯å¦å…¨ä¸º 1                  | `b.all()`       |
| `flip()`        | ç¿»è½¬æ‰€æœ‰ä½                   | `b.flip()`      |
| `flip(pos)`     | ç¿»è½¬ç¬¬ `pos` ä½             | `b.flip(3)`     |
| `set()`         | æ‰€æœ‰ä½è®¾ä¸º 1                 | `b.set()`       |
| `set(pos, val)` | è®¾ç½®ç¬¬ `pos` ä½ä¸º `val`      | `b.set(2, 0)`   |
| `reset()`       | æ‰€æœ‰ä½è®¾ä¸º 0                 | `b.reset()`     |
| `reset(pos)`    | ç¬¬ `pos` ä½è®¾ä¸º 0           | `b.reset(2)`    |
| `to_string()`   | è½¬ä¸ºå­—ç¬¦ä¸²ï¼ˆå¦‚ `"0101..."`ï¼‰    | `b.to_string()` |
| `to_ulong()`    | è½¬ä¸º `unsigned long`      | `b.to_ulong()`  |
| `to_ullong()`   | è½¬ä¸º `unsigned long long` | `b.to_ullong()` |



**è½¬ä¸ºå…¶ä»–ç±»å‹**

```cpp
bitset<4> b(5);
unsigned long ul = b.to_ulong();
unsigned long long ull = b.to_ullong();
string s = b.to_string();  // è½¬ä¸ºå­—ç¬¦ä¸²
```

### âœ… ä½è¿ç®—


æ”¯æŒä¸ã€æˆ–ã€å¼‚æˆ–ã€éç­‰ä½è¿ç®—ï¼Œå¯ä»¥é«˜æ•ˆåœ°è¿›è¡Œå¤šä¸ªäºŒè¿›åˆ¶æ•°çš„è¿ç®—ã€‚

ä¸¤ä¸ªé•¿åº¦ä¸º $n$ çš„ `bitset` åšä½è¿ç®—çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(\frac{n}{w})$ã€‚


```cpp
bitset<8> a("10101010");
bitset<8> b("11001100");

bitset<8> c = a & b;  // æŒ‰ä½ä¸
bitset<8> d  = a | b;  // æŒ‰ä½æˆ–
bitset<8> e = a ^ b;  // æŒ‰ä½å¼‚æˆ–
bitset<8> f = ~a;     // æŒ‰ä½é

cout << c << endl;  // è¾“å‡º: 10001000
cout << d << endl;   // è¾“å‡º: 11101110
cout << e << endl;  // è¾“å‡º: 01100110
cout << f << endl;  // è¾“å‡º: 01010101
cout << (a << 3) << endl; // è¾“å‡ºï¼š01010000
cout << (a >> 3) << endl; // è¾“å‡ºï¼š00010101
```



