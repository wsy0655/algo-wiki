<!DOCTYPE html>
<html lang="zh" dir="ltr" class="client-nojs" xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh">
<head><meta http-equiv="x-ua-compatible" content="ie=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>C++ &#20851;&#38190;&#35789;&#65306;reflexpr (&#21453;&#23556; TS)</title>
<link rel="stylesheet" href="ext.css" />
<link rel="stylesheet" href="site_modules.css" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-cpp_keyword_reflexpr skin-cppreference2 action-view cpp-navbar">
<div id="cpp-content-base">
<div id="content"><a id="top"></a>
<h1 id="firstHeading" class="firstHeading"><span style="font-size:0.8em; line-height:125%">C++ &#20851;&#38190;&#35789;&#65306;</span><code>reflexpr</code> <span class="t-mark-rev t-since-reflection-ts t-mark-ts" style="white-space: nowrap;">(&#21453;&#23556; TS)</span></h1>
<div id="bodyContent">
<div id="contentSub"><span class="subpages">&lt; <a href="cpp.html">cpp</a>&lrm; | <a href="cpp-keyword.html">keyword</a></span></div>
<div id="mw-content-text" lang="zh" dir="ltr" class="mw-content-ltr" xml:lang="zh">
<p><br /></p>
<h3><span class="mw-headline" id=".E7.94.A8.E6.B3.95">&#29992;&#27861;</span></h3>
<ol>
<li>&#33719;&#21462;<a href="cpp-keyword-class.html">&#31867;</a>&#31867;&#22411;&#30340;&#25104;&#21592;&#21015;&#34920;&#65292;&#25110;&#32773;<a href="cpp-keyword-enum.html">&#26522;&#20030;</a>&#31867;&#22411;&#30340;&#26522;&#20030;&#21015;&#34920;&#12290;</li>
<li>&#33719;&#24471;&#31867;&#22411;&#25110;&#25104;&#21592;&#30340;&#21517;&#31216;&#12290;</li>
<li>&#26816;&#27979;&#25104;&#21592;&#26159;&#21542;&#26159;<a href="cpp-keyword-static.html">&#38745;&#24577;</a>&#30340;&#65292;&#20134;&#21487;&#20197;&#33719;&#21462;&#25104;&#21592;&#26159;&#21542;&#26159; <a href="cpp-keyword-constexpr.html">constexpr</a> &#30340;&#12290;</li>
<li>&#26816;&#27979;&#25104;&#21592;&#20989;&#25968;&#26159;&#21542;&#20026;<a href="cpp-keyword-virtual.html">&#34394;</a>, &#20197;&#21450;&#20854;&#35775;&#38382;&#32423;&#21035;&#26159; <a href="cpp-keyword-public.html">public</a>&#12289;<a href="cpp-keyword-protected.html">protected</a> &#36824;&#26159; <a href="cpp-keyword-private.html">private</a>&#12290;</li>
<li>&#33719;&#21462;&#31867;&#22411;&#23450;&#20041;&#26102;&#22312;&#28304;&#20195;&#30721;&#20013;&#30340;&#30340;<i>&#34892;&#21495;</i>&#21644;<i>&#21015;&#21495;</i>&#12290;</li>
</ol>
<h3><span class="mw-headline" id=".E7.A4.BA.E4.BE.8B">&#31034;&#20363;</span></h3>
<div class="t-example">
<p><code><b>reflexpr</b></code> &#21487;&#20197;&#36890;&#36807;<i>&#20803;&#23545;&#35937;&#31867;&#22411;</i>&#26469;&#33719;&#21462;&#23545;&#35937;&#30340;&#20803;&#25968;&#25454;&#12290;&#27880;&#24847;&#65292;&#20351;&#29992; <code>std::reflect::get_data_members_t</code> &#21487;&#20197;&#35753;&#31243;&#24207;&#21592;&#23601;&#22914;&#21516;&#20351;&#29992; <span class="t-lc"><a href="cpp-utility-tuple.html">std::tuple</a></span> &#19968;&#33324;&#35775;&#38382;&#20219;&#20309;&#31867;&#12290;</p>
<div class="t-example-live-link"></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="cpp source-cpp">
<pre class="de1"><span class="co2">#include &lt;string&gt;</span>
<span class="co2">#include &lt;vector&gt;</span>
 
<span class="kw1">struct</span> S
<span class="br0">{</span>
    <span class="kw4">int</span> b<span class="sy4">;</span>
    <a href="cpp-string-basic_string.html"><span class="kw1233">std::<span class="me2">string</span></span></a> s<span class="sy4">;</span>
    <a href="cpp-container-vector.html"><span class="kw1272">std::<span class="me2">vector</span></span></a><span class="sy1">&lt;</span><a href="cpp-string-basic_string.html"><span class="kw1233">std::<span class="me2">string</span></span></a><span class="sy1">&gt;</span> v<span class="sy4">;</span>
<span class="br0">}</span><span class="sy4">;</span>
 
<span class="co1">// &#21453;&#23556; TS</span>
<span class="co2">#include &lt;experimental/reflect&gt;</span>
<span class="kw1">using</span> meta_S <span class="sy1">=</span> reflexpr<span class="br0">(</span>S<span class="br0">)</span><span class="sy4">;</span>
<span class="kw1">using</span> mem <span class="sy1">=</span> std<span class="sy4">::</span><span class="me2">reflect</span><span class="sy4">::</span><span class="me2">get_data_members_t</span><span class="sy1">&lt;</span>meta_S<span class="sy1">&gt;</span><span class="sy4">;</span>
<span class="kw1">using</span> meta <span class="sy1">=</span> std<span class="sy4">::</span><span class="me2">reflect</span><span class="sy4">::</span><span class="me2">get_data_members_t</span><span class="sy1">&lt;</span>mem<span class="sy1">&gt;</span><span class="sy4">;</span>
static_assert<span class="br0">(</span>std<span class="sy4">::</span><span class="me2">reflect</span><span class="sy4">::</span><span class="me2">is_public_v</span><span class="sy1">&lt;</span>meta<span class="sy1">&gt;</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// &#25104;&#21151;</span>
 
<span class="kw4">int</span> main<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="br0">}</span></pre></div>
</div>
</div>
<div class="t-example">
<p>&#36890;&#36807; <code><b>reflexpr</b></code>&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#33719;&#21462;&#21517;&#31216;&#20449;&#24687;:</p>
<div class="t-example-live-link"></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="cpp source-cpp">
<pre class="de1"><span class="co2">#include &lt;iostream&gt;</span>
<span class="co2">#include &lt;string&gt;</span>
<span class="co2">#include &lt;string_view&gt;</span>
<span class="co1">// &#21453;&#23556; TS</span>
<span class="co2">#include &lt;experimental/reflect&gt;</span>
 
<span class="kw1">template</span> <span class="sy1">&lt;</span><span class="kw1">typename</span> Tp<span class="sy1">&gt;</span>
<span class="kw4">constexpr</span> <a href="cpp-string-basic_string_view.html"><span class="kw1251">std::<span class="me2">string_view</span></span></a> nameof<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">using</span> TpInfo <span class="sy1">=</span> reflexpr<span class="br0">(</span>Tp<span class="br0">)</span><span class="sy4">;</span>
    <span class="kw1">using</span> aliased_Info <span class="sy1">=</span> std<span class="sy4">::</span><span class="me2">experimental</span><span class="sy4">::</span><span class="me2">reflect</span><span class="sy4">::</span><span class="me2">get_aliased_t</span><span class="sy1">&lt;</span>TpInfo<span class="sy1">&gt;</span><span class="sy4">;</span>
    <span class="kw1">return</span> std<span class="sy4">::</span><span class="me2">experimental</span><span class="sy4">::</span><span class="me2">reflect</span><span class="sy4">::</span><span class="me2">get_name_v</span><span class="sy1">&lt;</span>aliased_Info<span class="sy1">&gt;</span><span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw4">int</span> main<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <a href="cpp-io-cout.html"><span class="kw1762">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> nameof<span class="sy1">&lt;</span><a href="cpp-string-basic_string.html"><span class="kw1233">std::<span class="me2">string</span></span></a><span class="sy1">&gt;</span><span class="br0">(</span><span class="br0">)</span> <span class="sy1">&lt;&lt;</span> <span class="st0">&#39;<span class="es1">\n</span>&#39;</span><span class="sy4">;</span>
    static_assert<span class="br0">(</span>nameof<span class="sy1">&lt;</span><a href="cpp-string-basic_string.html"><span class="kw1233">std::<span class="me2">string</span></span></a><span class="sy1">&gt;</span><span class="br0">(</span><span class="br0">)</span> <span class="sy1">==</span> <span class="st0">&quot;basic_string&quot;</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// &#25104;&#21151;</span>
<span class="br0">}</span></pre></div>
</div>
</div>
<div class="t-example">
<p>&#36825;&#26159;&#22312;<a href="cpp-experimental-reflect.html">&#21453;&#23556; TS</a>&#20013;&#33719;&#21462;&#31867;&#22411;&#25152;&#22312;&#21629;&#21517;&#31354;&#38388;&#30340;&#31034;&#20363;&#12290;</p>
<div class="t-example-live-link"></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="cpp source-cpp">
<pre class="de1"><span class="kw1">namespace</span> Foo
<span class="br0">{</span>
    <span class="kw1">struct</span> FooFoo
    <span class="br0">{</span>
        <span class="kw4">int</span> FooFooFoo<span class="sy4">;</span>
    <span class="br0">}</span><span class="sy4">;</span>
<span class="br0">}</span>
<span class="kw1">namespace</span> Bar
<span class="br0">{</span>
    <span class="kw1">using</span> BarBar <span class="sy1">=</span> <span class="sy4">::</span><span class="me2">Foo</span><span class="sy4">::</span><span class="me2">FooFoo</span><span class="sy4">;</span>
<span class="br0">}</span>
<span class="kw1">using</span> BarBarInfo <span class="sy1">=</span> reflexpr<span class="br0">(</span><span class="sy4">::</span><span class="me2">Bar</span><span class="sy4">::</span><span class="me2">BarBar</span><span class="br0">)</span><span class="sy4">;</span>
<span class="kw1">using</span> BarBarScope <span class="sy1">=</span> <span class="sy4">::</span><span class="me2">std</span><span class="sy4">::</span><span class="me2">experimental</span><span class="sy4">::</span><span class="me2">reflect</span><span class="sy4">::</span><span class="me2">get_scope_t</span><span class="sy1">&lt;</span>BarBarInfo<span class="sy1">&gt;</span><span class="sy4">;</span> <span class="co1">// Bar&#65292;&#32780;&#38750; Foo</span>
 
<span class="kw1">struct</span> Spam
<span class="br0">{</span>
    <span class="kw4">int</span> SpamSpam<span class="sy4">;</span>
<span class="br0">}</span><span class="sy4">;</span>
<span class="kw1">struct</span> Grok
<span class="br0">{</span>
    <span class="kw1">using</span> GrokGrok <span class="sy1">=</span> Spam<span class="sy4">::</span><span class="me2">SpamSpam</span><span class="sy4">;</span>
<span class="br0">}</span><span class="sy4">;</span>
<span class="kw1">using</span> GrokGrokInfo <span class="sy1">=</span> reflexpr<span class="br0">(</span><span class="sy4">::</span><span class="me2">Grok</span><span class="sy4">::</span><span class="me2">GrokGrok</span><span class="br0">)</span><span class="sy4">;</span>
<span class="kw1">using</span> GrokGrokScope <span class="sy1">=</span> std<span class="sy4">::</span><span class="me2">experimental</span><span class="sy4">::</span><span class="me2">reflect</span><span class="sy4">::</span><span class="me2">get_scope_t</span><span class="sy1">&lt;</span>GrokGrokInfo<span class="sy1">&gt;</span><span class="sy4">;</span> <span class="co1">// Grok&#65292;&#32780;&#38750; Spam</span></pre></div>
</div>
</div>
</div>
<div class="visualClear"></div>
</div>
</div>
</div>
</body>
</html>
