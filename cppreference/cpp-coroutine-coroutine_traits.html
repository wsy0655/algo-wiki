<!DOCTYPE html>
<html lang="zh" dir="ltr" class="client-nojs" xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh">
<head><meta http-equiv="x-ua-compatible" content="ie=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>std::coroutine_traits</title>
<link rel="stylesheet" href="ext.css" />
<link rel="stylesheet" href="site_modules.css" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-cpp_coroutine_coroutine_traits skin-cppreference2 action-view cpp-navbar">
<div id="cpp-content-base">
<div id="content"><a id="top"></a>
<h1 id="firstHeading" class="firstHeading"><span style="font-size:0.8em; line-height:125%">std::</span>coroutine_traits</h1>
<div id="bodyContent">
<div id="contentSub"><span class="subpages">&lt; <a href="cpp.html">cpp</a>&lrm; | <a href="cpp-coroutine.html">coroutine</a></span></div>
<div id="mw-content-text" lang="zh" dir="ltr" class="mw-content-ltr" xml:lang="zh">
<table class="t-dcl-begin">
<tbody>
<tr class="t-dsc-header">
<td>
<div>&#22312;&#26631;&#22836; <code><a href="cpp-header-coroutine.html">&lt;coroutine&gt;</a></code> &#23450;&#20041;</div>
</td>
<td></td>
<td></td>
</tr>
<tr class="t-dcl t-since-cxx20">
<td>
<div><span class="mw-geshi cpp source-cpp"><span class="kw1">template</span><span class="sy1">&lt;</span> <span class="kw1">class</span> R, <span class="kw1">class</span>... <span class="me1">Args</span> <span class="sy1">&gt;</span><br />
<span class="kw1">struct</span> coroutine_traits<span class="sy4">;</span></span></div>
</td>
<td class="t-dcl-nopad"></td>
<td><span class="t-mark-rev t-since-cxx20" style="white-space: nowrap;">(C++20 &#36215;)</span></td>
</tr>
<tr class="t-dcl-sep">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>&#20174;&#21327;&#31243;&#30340;&#36820;&#22238;&#31867;&#22411;&#19982;&#24418;&#21442;&#31867;&#22411;&#30830;&#23450;&#25215;&#35834;&#31867;&#22411;&#12290;&#22914;&#26524;&#38480;&#23450;&#26631;&#35782; <code>R::promise_type</code> &#21512;&#27861;&#24182;&#20195;&#34920;&#19968;&#20010;&#31867;&#22411;&#65292;&#37027;&#20040;&#26631;&#20934;&#24211;&#23454;&#29616;&#25552;&#20379;&#19982;&#35813;&#31867;&#22411;&#30456;&#21516;&#30340;&#20844;&#24320;&#21487;&#35775;&#38382;&#25104;&#21592;&#31867;&#22411; <code>promise_type</code>&#12290;&#21542;&#21017;&#26080;&#27492;&#25104;&#21592;&#12290;</p>
<p><code>coroutine_traits</code> &#30340;<a href="cpp-language-type.html#.E7.94.B1.E7.A8.8B.E5.BA.8F.E5.AE.9A.E4.B9.89.E7.9A.84.E7.B1.BB.E5.9E.8B">&#30001;&#31243;&#24207;&#23450;&#20041;&#30340;&#29305;&#21270;</a>&#24517;&#39035;&#23450;&#20041;&#20844;&#24320;&#21487;&#35775;&#38382;&#30340;&#23884;&#22871;&#31867;&#22411; <code>promise_type</code>&#65292;&#21542;&#21017;&#31243;&#24207;&#38750;&#33391;&#26500;&#12290;</p>
<h3><span class="mw-headline" id=".E6.A8.A1.E6.9D.BF.E5.BD.A2.E5.8F.82">&#27169;&#26495;&#24418;&#21442;</span></h3>
<table class="t-par-begin">
<tr class="t-par">
<td>R</td>
<td>-</td>
<td>&#21327;&#31243;&#30340;&#36820;&#22238;&#31867;&#22411;</td>
</tr>
<tr class="t-par">
<td>Args</td>
<td>-</td>
<td>&#21327;&#31243;&#30340;&#24418;&#21442;&#31867;&#22411;&#65292;&#33509;&#21327;&#31243;&#20026;&#38750;&#38745;&#24577;&#25104;&#21592;&#20989;&#25968;&#21017;&#21253;&#25324;<a href="cpp-language-member_functions.html#.E5.BC.95.E7.94.A8.E9.99.90.E5.AE.9A.E7.9A.84.E6.88.90.E5.91.98.E5.87.BD.E6.95.B0">&#38544;&#24335;&#23545;&#35937;&#24418;&#21442;</a></td>
</tr>
</table>
<h3><span class="mw-headline" id=".E5.B5.8C.E5.A5.97.E7.B1.BB.E5.9E.8B">&#23884;&#22871;&#31867;&#22411;</span></h3>
<table class="t-dsc-begin">
<tr class="t-dsc-hitem">
<td>&#21517;&#23383;</td>
<td>&#23450;&#20041;</td>
</tr>
<tr class="t-dsc">
<td><code>promise_type</code></td>
<td><code>R::promise_type</code>&#65288;&#22914;&#26524;&#21512;&#27861;&#65289;&#65292;&#25110;&#30001;&#31243;&#24207;&#23450;&#20041;&#30340;&#29305;&#21270;&#25552;&#20379;</td>
</tr>
</table>
<h3><span class="mw-headline" id=".E5.8F.AF.E8.83.BD.E7.9A.84.E5.AE.9E.E7.8E.B0">&#21487;&#33021;&#30340;&#23454;&#29616;</span></h3>
<table class="eq-fun-cpp-table">
<tr>
<td>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="cpp source-cpp">
<pre class="de1"><span class="kw1">namespace</span> detail <span class="br0">{</span>
<span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span>, <span class="kw1">class</span>...<span class="sy1">&gt;</span>
<span class="kw1">struct</span> coroutine_traits_base <span class="br0">{</span><span class="br0">}</span><span class="sy4">;</span>
 
<span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R, <span class="kw1">class</span>... <span class="me1">Args</span><span class="sy1">&gt;</span>
requires requires <span class="br0">{</span> <span class="kw1">typename</span> R<span class="sy4">::</span><span class="me2">promise_type</span><span class="sy4">;</span> <span class="br0">}</span>
<span class="kw1">struct</span> coroutine_traits_base <span class="sy1">&lt;</span>R, Args...<span class="sy1">&gt;</span>
<span class="br0">{</span>
    <span class="kw1">using</span> promise_type <span class="sy1">=</span> R<span class="sy4">::</span><span class="me2">promise_type</span><span class="sy4">;</span>
<span class="br0">}</span><span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R, <span class="kw1">class</span>... <span class="me1">Args</span><span class="sy1">&gt;</span>
<span class="kw1">struct</span> coroutine_traits <span class="sy4">:</span> detail<span class="sy4">::</span><span class="me2">coroutine_traits_base</span><span class="sy1">&lt;</span>R, Args...<span class="sy1">&gt;</span> <span class="br0">{</span><span class="br0">}</span><span class="sy4">;</span></pre></div>
</div>
</td>
</tr>
</table>
<h3><span class="mw-headline" id=".E6.B3.A8.E8.A7.A3">&#27880;&#35299;</span></h3>
<p>&#22914;&#26524;&#21327;&#31243;&#26159;&#38750;&#38745;&#24577;&#25104;&#21592;&#20989;&#25968;&#65292;&#37027;&#20040; <code>Args...</code> &#20013;&#30340;&#39318;&#20010;&#31867;&#22411;&#20026;&#38544;&#24335;&#23545;&#35937;&#24418;&#21442;&#30340;&#31867;&#22411;&#65292;&#32780;&#21097;&#19979;&#30340;&#26159;&#20989;&#25968;&#30340;&#24418;&#21442;&#31867;&#22411;&#65288;&#22914;&#26524;&#23384;&#22312;&#65289;&#12290;</p>
<p>&#22914;&#26524; <code>std::coroutind_traits&lt;R, Args...&gt;::promise_type</code> &#19981;&#23384;&#22312;&#25110;&#19981;&#26159;&#31867;&#31867;&#22411;&#65292;&#37027;&#20040;&#23545;&#24212;&#30340;&#21327;&#31243;&#23450;&#20041;&#38750;&#33391;&#26500;&#12290;</p>
<p>&#29992;&#25143;&#21487;&#23450;&#20041;&#21462;&#20915;&#20110;&#31243;&#24207;&#23450;&#20041;&#31867;&#22411;&#30340; <code>coroutine_traits</code> &#26174;&#24335;&#25110;&#37096;&#20998;&#29305;&#21270;&#65292;&#20197;&#36991;&#20813;&#20462;&#25913;&#36820;&#22238;&#31867;&#22411;&#12290;</p>
<h3><span class="mw-headline" id=".E7.A4.BA.E4.BE.8B">&#31034;&#20363;</span></h3>
<div class="t-example">
<div class="t-example-live-link"></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="cpp source-cpp">
<pre class="de1"><span class="co2">#include &lt;chrono&gt;</span>
<span class="co2">#include &lt;coroutine&gt;</span>
<span class="co2">#include &lt;exception&gt;</span>
<span class="co2">#include &lt;future&gt;</span>
<span class="co2">#include &lt;iostream&gt;</span>
<span class="co2">#include &lt;thread&gt;</span>
<span class="co2">#include &lt;type_traits&gt;</span>
 
<span class="co1">// &#31243;&#24207;&#23450;&#20041;&#30340;&#31867;&#22411;&#65292;&#19979;&#38754;&#25552;&#20379; coroutine_traits &#38024;&#23545;&#23427;&#30340;&#29305;&#21270;</span>
<span class="kw1">struct</span> as_coroutine <span class="br0">{</span><span class="br0">}</span><span class="sy4">;</span>
 
<span class="co1">// &#36890;&#36807;&#20351;&#29992; std::promise&lt;T&gt; &#20026;&#25215;&#35834;&#31867;&#22411;&#65292;</span>
<span class="co1">// &#20801;&#35768;&#23558; std::future&lt;T&gt; &#29992;&#20316;&#21327;&#31243;&#31867;&#22411;&#12290;</span>
<span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">typename</span> T, <span class="kw1">typename</span>... <span class="me1">Args</span><span class="sy1">&gt;</span>
    requires<span class="br0">(</span><span class="sy3">!</span><a href="cpp-types-is_void.html"><span class="kw458">std::<span class="me2">is_void_v</span></span></a><span class="sy1">&lt;</span>T<span class="sy1">&gt;</span> <span class="sy3">&amp;&amp;</span> <span class="sy3">!</span><a href="cpp-types-is_reference.html"><span class="kw488">std::<span class="me2">is_reference_v</span></span></a><span class="sy1">&lt;</span>T<span class="sy1">&gt;</span><span class="br0">)</span>
<span class="kw1">struct</span> std<span class="sy4">::</span><span class="me2">coroutine_traits</span><span class="sy1">&lt;</span><a href="cpp-thread-future.html"><span class="kw2184">std::<span class="me2">future</span></span></a><span class="sy1">&lt;</span>T<span class="sy1">&gt;</span>, as_coroutine, Args...<span class="sy1">&gt;</span>
<span class="br0">{</span>
    <span class="kw1">struct</span> promise_type <span class="sy4">:</span> <a href="cpp-thread-promise.html"><span class="kw2183">std::<span class="me2">promise</span></span></a><span class="sy1">&lt;</span>T<span class="sy1">&gt;</span>
    <span class="br0">{</span>
        <a href="cpp-thread-future.html"><span class="kw2184">std::<span class="me2">future</span></span></a><span class="sy1">&lt;</span>T<span class="sy1">&gt;</span> get_return_object<span class="br0">(</span><span class="br0">)</span> <span class="kw1">noexcept</span>
        <span class="br0">{</span>
            <span class="kw1">return</span> this<span class="sy2">-</span><span class="sy1">&gt;</span>get_future<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="br0">}</span>
 
        <a href="cpp-coroutine-suspend_never.html"><span class="kw3258">std::<span class="me2">suspend_never</span></span></a> initial_suspend<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span> <span class="kw1">noexcept</span> <span class="br0">{</span> <span class="kw1">return</span> <span class="br0">{</span><span class="br0">}</span><span class="sy4">;</span> <span class="br0">}</span>
        <a href="cpp-coroutine-suspend_never.html"><span class="kw3258">std::<span class="me2">suspend_never</span></span></a> final_suspend<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span> <span class="kw1">noexcept</span> <span class="br0">{</span> <span class="kw1">return</span> <span class="br0">{</span><span class="br0">}</span><span class="sy4">;</span> <span class="br0">}</span>
 
        <span class="kw4">void</span> return_value<span class="br0">(</span><span class="kw4">const</span> T<span class="sy3">&amp;</span> value<span class="br0">)</span>
            <span class="kw1">noexcept</span><span class="br0">(</span><a href="cpp-types-is_copy_constructible.html"><span class="kw544">std::<span class="me2">is_nothrow_copy_constructible_v</span></span></a><span class="sy1">&lt;</span>T<span class="sy1">&gt;</span><span class="br0">)</span>
        <span class="br0">{</span>
            this<span class="sy2">-</span><span class="sy1">&gt;</span>set_value<span class="br0">(</span>value<span class="br0">)</span><span class="sy4">;</span>
        <span class="br0">}</span>
 
        <span class="kw4">void</span> return_value<span class="br0">(</span>T<span class="sy3">&amp;&amp;</span> value<span class="br0">)</span> <span class="kw1">noexcept</span><span class="br0">(</span><a href="cpp-types-is_move_constructible.html"><span class="kw550">std::<span class="me2">is_nothrow_move_constructible_v</span></span></a><span class="sy1">&lt;</span>T<span class="sy1">&gt;</span><span class="br0">)</span>
        <span class="br0">{</span>
            this<span class="sy2">-</span><span class="sy1">&gt;</span>set_value<span class="br0">(</span>std<span class="sy4">::</span><span class="me2">move</span><span class="br0">(</span>value<span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="br0">}</span>
 
        <span class="kw4">void</span> unhandled_exception<span class="br0">(</span><span class="br0">)</span> <span class="kw1">noexcept</span>
        <span class="br0">{</span>
            this<span class="sy2">-</span><span class="sy1">&gt;</span>set_exception<span class="br0">(</span><a href="cpp-error-current_exception.html"><span class="kw780">std::<span class="me2">current_exception</span></span></a><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="br0">}</span>
    <span class="br0">}</span><span class="sy4">;</span>
<span class="br0">}</span><span class="sy4">;</span>
 
<span class="co1">// &#19982; std::future&lt;void&gt; &#30456;&#21516;</span>
<span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">typename</span>... <span class="me1">Args</span><span class="sy1">&gt;</span>
<span class="kw1">struct</span> std<span class="sy4">::</span><span class="me2">coroutine_traits</span><span class="sy1">&lt;</span><a href="cpp-thread-future.html"><span class="kw2184">std::<span class="me2">future</span></span></a><span class="sy1">&lt;</span><span class="kw4">void</span><span class="sy1">&gt;</span>, as_coroutine, Args...<span class="sy1">&gt;</span>
<span class="br0">{</span>
    <span class="kw1">struct</span> promise_type <span class="sy4">:</span> <a href="cpp-thread-promise.html"><span class="kw2183">std::<span class="me2">promise</span></span></a><span class="sy1">&lt;</span><span class="kw4">void</span><span class="sy1">&gt;</span>
    <span class="br0">{</span>
        <a href="cpp-thread-future.html"><span class="kw2184">std::<span class="me2">future</span></span></a><span class="sy1">&lt;</span><span class="kw4">void</span><span class="sy1">&gt;</span> get_return_object<span class="br0">(</span><span class="br0">)</span> <span class="kw1">noexcept</span>
        <span class="br0">{</span>
            <span class="kw1">return</span> this<span class="sy2">-</span><span class="sy1">&gt;</span>get_future<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="br0">}</span>
 
        <a href="cpp-coroutine-suspend_never.html"><span class="kw3258">std::<span class="me2">suspend_never</span></span></a> initial_suspend<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span> <span class="kw1">noexcept</span> <span class="br0">{</span> <span class="kw1">return</span> <span class="br0">{</span><span class="br0">}</span><span class="sy4">;</span> <span class="br0">}</span>
        <a href="cpp-coroutine-suspend_never.html"><span class="kw3258">std::<span class="me2">suspend_never</span></span></a> final_suspend<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span> <span class="kw1">noexcept</span> <span class="br0">{</span> <span class="kw1">return</span> <span class="br0">{</span><span class="br0">}</span><span class="sy4">;</span> <span class="br0">}</span>
 
        <span class="kw4">void</span> return_void<span class="br0">(</span><span class="br0">)</span> <span class="kw1">noexcept</span>
        <span class="br0">{</span>
            this<span class="sy2">-</span><span class="sy1">&gt;</span>set_value<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="br0">}</span>
 
        <span class="kw4">void</span> unhandled_exception<span class="br0">(</span><span class="br0">)</span> <span class="kw1">noexcept</span>
        <span class="br0">{</span>
            this<span class="sy2">-</span><span class="sy1">&gt;</span>set_exception<span class="br0">(</span><a href="cpp-error-current_exception.html"><span class="kw780">std::<span class="me2">current_exception</span></span></a><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="br0">}</span>
    <span class="br0">}</span><span class="sy4">;</span>
<span class="br0">}</span><span class="sy4">;</span>
 
<span class="co1">// &#36890;&#36807;&#21333;&#32431;&#22320;&#20026;&#27599;&#20010; co_await &#23413;&#21270;&#26032;&#32447;&#31243;&#65292;</span>
<span class="co1">// &#20801;&#35768;&#23545; std::future&lt;T&gt; &#21644; std::future&lt;void&gt; &#30340; co_await&#12290;</span>
<span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">typename</span> T<span class="sy1">&gt;</span>
<span class="kw4">auto</span> operator co_await<span class="br0">(</span><a href="cpp-thread-future.html"><span class="kw2184">std::<span class="me2">future</span></span></a><span class="sy1">&lt;</span>T<span class="sy1">&gt;</span> future<span class="br0">)</span> <span class="kw1">noexcept</span>
    requires<span class="br0">(</span><span class="sy3">!</span><a href="cpp-types-is_reference.html"><span class="kw488">std::<span class="me2">is_reference_v</span></span></a><span class="sy1">&lt;</span>T<span class="sy1">&gt;</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">struct</span> awaiter <span class="sy4">:</span> <a href="cpp-thread-future.html"><span class="kw2184">std::<span class="me2">future</span></span></a><span class="sy1">&lt;</span>T<span class="sy1">&gt;</span>
    <span class="br0">{</span>
        <span class="kw4">bool</span> await_ready<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span> <span class="kw1">noexcept</span>
        <span class="br0">{</span>
            <span class="kw1">using</span> <span class="kw1">namespace</span> std<span class="sy4">::</span><span class="me2">chrono_literals</span><span class="sy4">;</span>
            <span class="kw1">return</span> this<span class="sy2">-</span><span class="sy1">&gt;</span>wait_for<span class="br0">(</span>0s<span class="br0">)</span> <span class="sy3">!</span><span class="sy1">=</span> <a href="cpp-thread-future_status.html"><span class="kw2193">std::<span class="me2">future_status</span><span class="sy4">::</span><span class="me2">timeout</span></span></a><span class="sy4">;</span>
        <span class="br0">}</span>
 
        <span class="kw4">void</span> await_suspend<span class="br0">(</span><a href="cpp-coroutine-coroutine_handle.html"><span class="kw3206">std::<span class="me2">coroutine_handle</span></span></a><span class="sy1">&lt;&gt;</span> cont<span class="br0">)</span> <span class="kw4">const</span>
        <span class="br0">{</span>
            <a href="cpp-thread-thread.html"><span class="kw2150">std::<span class="me2">thread</span></span></a><span class="br0">(</span><span class="br0">[</span>this, cont<span class="br0">]</span>
            <span class="br0">{</span>
                this<span class="sy2">-</span><span class="sy1">&gt;</span>wait<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
                cont<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
            <span class="br0">}</span><span class="br0">)</span>.<span class="me1">detach</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="br0">}</span>
 
        T await_resume<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> this<span class="sy2">-</span><span class="sy1">&gt;</span>get<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="br0">}</span>
    <span class="br0">}</span><span class="sy4">;</span>
 
    <span class="kw1">return</span> awaiter <span class="br0">{</span> std<span class="sy4">::</span><span class="me2">move</span><span class="br0">(</span>future<span class="br0">)</span> <span class="br0">}</span><span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="co1">// &#21033;&#29992;&#24050;&#32463;&#24314;&#31435;&#30340;&#26550;&#26500;&#12290;</span>
<a href="cpp-thread-future.html"><span class="kw2184">std::<span class="me2">future</span></span></a><span class="sy1">&lt;</span><span class="kw4">int</span><span class="sy1">&gt;</span> compute<span class="br0">(</span>as_coroutine<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw4">int</span> a <span class="sy1">=</span> co_await <a href="cpp-thread-async.html"><span class="kw2187">std::<span class="me2">async</span></span></a><span class="br0">(</span><span class="br0">[</span><span class="br0">]</span> <span class="br0">{</span> <span class="kw1">return</span> <span class="nu0">6</span><span class="sy4">;</span> <span class="br0">}</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw4">int</span> b <span class="sy1">=</span> co_await <a href="cpp-thread-async.html"><span class="kw2187">std::<span class="me2">async</span></span></a><span class="br0">(</span><span class="br0">[</span><span class="br0">]</span> <span class="br0">{</span> <span class="kw1">return</span> <span class="nu0">7</span><span class="sy4">;</span> <span class="br0">}</span><span class="br0">)</span><span class="sy4">;</span>
    co_return a <span class="sy2">*</span> b<span class="sy4">;</span>
<span class="br0">}</span>
 
<a href="cpp-thread-future.html"><span class="kw2184">std::<span class="me2">future</span></span></a><span class="sy1">&lt;</span><span class="kw4">void</span><span class="sy1">&gt;</span> fail<span class="br0">(</span>as_coroutine<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">throw</span> <a href="cpp-error-runtime_error.html"><span class="kw772">std::<span class="me2">runtime_error</span></span></a><span class="br0">(</span><span class="st0">&quot;bleah&quot;</span><span class="br0">)</span><span class="sy4">;</span>
    co_return<span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw4">int</span> main<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <a href="cpp-io-cout.html"><span class="kw1762">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> compute<span class="br0">(</span><span class="br0">{</span><span class="br0">}</span><span class="br0">)</span>.<span class="me1">get</span><span class="br0">(</span><span class="br0">)</span> <span class="sy1">&lt;&lt;</span> <span class="st0">&#39;<span class="es1">\n</span>&#39;</span><span class="sy4">;</span>
 
    <span class="kw1">try</span>
    <span class="br0">{</span>
        fail<span class="br0">(</span><span class="br0">{</span><span class="br0">}</span><span class="br0">)</span>.<span class="me1">get</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="br0">}</span>
    <span class="kw1">catch</span> <span class="br0">(</span><span class="kw4">const</span> <a href="cpp-error-runtime_error.html"><span class="kw772">std::<span class="me2">runtime_error</span></span></a><span class="sy3">&amp;</span> e<span class="br0">)</span>
    <span class="br0">{</span>
        <a href="cpp-io-cout.html"><span class="kw1762">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">&quot;&#38169;&#35823;&#65306;&quot;</span> <span class="sy1">&lt;&lt;</span> e.<span class="me1">what</span><span class="br0">(</span><span class="br0">)</span> <span class="sy1">&lt;&lt;</span> <span class="st0">&#39;<span class="es1">\n</span>&#39;</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span></pre></div>
</div>
<p>&#36755;&#20986;&#65306;</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="text source-text">
<pre class="de1">42
&#38169;&#35823;&#65306;bleah</pre></div>
</div>
</div>
</div>
<div class="visualClear"></div>
</div>
</div>
</div>
</body>
</html>
