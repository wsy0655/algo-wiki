<!DOCTYPE html>
<html lang="zh" dir="ltr" class="client-nojs" xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh">
<head><meta http-equiv="x-ua-compatible" content="ie=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>&#26631;&#20934;&#24211;&#26631;&#22836; &lt;future&gt;</title>
<link rel="stylesheet" href="ext.css" />
<link rel="stylesheet" href="site_modules.css" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-cpp_header_future skin-cppreference2 action-view cpp-navbar">
<div id="cpp-content-base">
<div id="content"><a id="top"></a>
<h1 id="firstHeading" class="firstHeading"><span style="font-size:0.8em; line-height:125%">&#26631;&#20934;&#24211;&#26631;&#22836;</span> &lt;future&gt;</h1>
<div id="bodyContent">
<div id="contentSub"><span class="subpages">&lt; <a href="cpp.html">cpp</a>&lrm; | <a href="cpp-header.html">header</a></span></div>
<div id="mw-content-text" lang="zh" dir="ltr" class="mw-content-ltr" xml:lang="zh">
<p><br /></p>
<p>&#27492;&#22836;&#25991;&#20214;&#26159;<a href="cpp-thread.html">&#32447;&#31243;&#25903;&#25345;</a>&#24211;&#30340;&#19968;&#37096;&#20998;&#12290;</p>
<table class="t-dsc-begin">
<tr>
<td colspan="2">
<h3><span class="mw-headline" id=".E7.B1.BB">&#31867;</span></h3>
</td>
</tr>
<tr class="t-dsc">
<td>
<div class="t-dsc-member-div">
<div><a href="cpp-thread-promise.html"><span class="t-lines"><span>promise</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11" style="white-space: nowrap;">(C++11)</span></span></span></div>
</div>
</td>
<td>&#23384;&#20648;&#19968;&#20010;&#20540;&#20197;&#36827;&#34892;&#24322;&#27493;&#33719;&#21462;<br />
<span class="t-mark" style="white-space: nowrap;">(&#31867;&#27169;&#26495;)</span></td>
</tr>
<tr class="t-dsc">
<td>
<div class="t-dsc-member-div">
<div><a href="cpp-thread-packaged_task.html"><span class="t-lines"><span>packaged_task</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11" style="white-space: nowrap;">(C++11)</span></span></span></div>
</div>
</td>
<td>&#25171;&#21253;&#19968;&#20010;&#20989;&#25968;&#65292;&#23384;&#20648;&#20854;&#36820;&#22238;&#20540;&#20197;&#36827;&#34892;&#24322;&#27493;&#33719;&#21462;<br />
<span class="t-mark" style="white-space: nowrap;">(&#31867;&#27169;&#26495;)</span></td>
</tr>
<tr class="t-dsc">
<td>
<div class="t-dsc-member-div">
<div><a href="cpp-thread-future.html"><span class="t-lines"><span>future</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11" style="white-space: nowrap;">(C++11)</span></span></span></div>
</div>
</td>
<td>&#31561;&#24453;&#34987;&#24322;&#27493;&#35774;&#32622;&#30340;&#20540;<br />
<span class="t-mark" style="white-space: nowrap;">(&#31867;&#27169;&#26495;)</span></td>
</tr>
<tr class="t-dsc">
<td>
<div class="t-dsc-member-div">
<div><a href="cpp-thread-shared_future.html"><span class="t-lines"><span>shared_future</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11" style="white-space: nowrap;">(C++11)</span></span></span></div>
</div>
</td>
<td>&#31561;&#24453;&#19968;&#20010;&#34987;&#24322;&#27493;&#35774;&#32622;&#30340;&#20540;&#65288;&#21487;&#33021;&#34987;&#20854;&#20182;&#26410;&#26469;&#20307;&#24341;&#29992;&#65289;<br />
<span class="t-mark" style="white-space: nowrap;">(&#31867;&#27169;&#26495;)</span></td>
</tr>
<tr class="t-dsc">
<td>
<div class="t-dsc-member-div">
<div><a href="cpp-thread-launch.html"><span class="t-lines"><span>launch</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11" style="white-space: nowrap;">(C++11)</span></span></span></div>
</div>
</td>
<td>&#25351;&#23450; <span class="t-lc"><a href="cpp-thread-async.html">std::async</a></span> &#25152;&#29992;&#30340;&#21551;&#21160;&#31574;&#30053;<br />
<span class="t-mark" style="white-space: nowrap;">(&#26522;&#20030;)</span></td>
</tr>
<tr class="t-dsc">
<td>
<div class="t-dsc-member-div">
<div><a href="cpp-thread-future_status.html"><span class="t-lines"><span>future_status</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11" style="white-space: nowrap;">(C++11)</span></span></span></div>
</div>
</td>
<td>&#25351;&#23450;&#22312; <span class="t-lc"><a href="cpp-thread-future.html">std::future</a></span> &#21644; <span class="t-lc"><a href="cpp-thread-shared_future.html">std::shared_future</a></span> &#19978;&#30340;&#23450;&#26102;&#31561;&#24453;&#30340;&#32467;&#26524;<br />
<span class="t-mark" style="white-space: nowrap;">(&#26522;&#20030;)</span></td>
</tr>
<tr class="t-dsc">
<td>
<div class="t-dsc-member-div">
<div><a href="cpp-thread-future_error.html"><span class="t-lines"><span>future_error</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11" style="white-space: nowrap;">(C++11)</span></span></span></div>
</div>
</td>
<td>&#25253;&#21578;&#19982;&#26410;&#26469;&#20307;&#25110;&#25215;&#35834;&#20307;&#26377;&#20851;&#30340;&#38169;&#35823;<br />
<span class="t-mark" style="white-space: nowrap;">(&#31867;)</span></td>
</tr>
<tr class="t-dsc">
<td>
<div class="t-dsc-member-div">
<div><a href="cpp-thread-future_errc.html"><span class="t-lines"><span>future_errc</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11" style="white-space: nowrap;">(C++11)</span></span></span></div>
</div>
</td>
<td>&#37492;&#21035;&#26410;&#26469;&#20307;&#38169;&#35823;&#30721;<br />
<span class="t-mark" style="white-space: nowrap;">(&#26522;&#20030;)</span></td>
</tr>
<tr class="t-dsc">
<td>
<div class="t-dsc-member-div">
<div><a href="cpp-thread-promise-uses_allocator.html"><span class="t-lines"><span>std::uses_allocator<span class="t-dsc-small">&lt;std::promise&gt;</span></span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11" style="white-space: nowrap;">(C++11)</span></span></span></div>
</div>
</td>
<td>&#29305;&#21270; <span class="t-lc"><a href="cpp-memory-uses_allocator.html">std::uses_allocator</a></span> &#31867;&#22411;&#29305;&#24449;<br />
<span class="t-mark" style="white-space: nowrap;">(&#31867;&#27169;&#26495;&#29305;&#21270;)</span></td>
</tr>
<tr class="t-dsc">
<td>
<div class="t-dsc-member-div">
<div><a href="cpp-thread-packaged_task-uses_allocator.html"><span class="t-lines"><span>std::uses_allocator<span class="t-dsc-small">&lt;std::packaged_task&gt;</span></span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11" style="white-space: nowrap;">(C++11)</span><span class="t-mark-rev t-until-cxx17" style="white-space: nowrap;">(C++17 &#21069;)</span></span></span></div>
</div>
</td>
<td>&#29305;&#21270; <span class="t-lc"><a href="cpp-memory-uses_allocator.html">std::uses_allocator</a></span> &#31867;&#22411;&#29305;&#24449;<br />
<span class="t-mark" style="white-space: nowrap;">(&#31867;&#27169;&#26495;&#29305;&#21270;)</span></td>
</tr>
<tr>
<td colspan="2">
<h3><span class="mw-headline" id=".E5.87.BD.E6.95.B0">&#20989;&#25968;</span></h3>
</td>
</tr>
<tr class="t-dsc">
<td>
<div class="t-dsc-member-div">
<div><a href="cpp-thread-async.html"><span class="t-lines"><span>async</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11" style="white-space: nowrap;">(C++11)</span></span></span></div>
</div>
</td>
<td>&#24322;&#27493;&#36816;&#34892;&#19968;&#20010;&#20989;&#25968;&#65288;&#26377;&#21487;&#33021;&#22312;&#26032;&#32447;&#31243;&#20013;&#25191;&#34892;&#65289;&#65292;&#24182;&#36820;&#22238;&#23558;&#20445;&#26377;&#23427;&#30340;&#32467;&#26524;&#30340; <span class="t-lc"><a href="cpp-thread-future.html">std::future</a></span><br />
<span class="t-mark" style="white-space: nowrap;">(&#20989;&#25968;&#27169;&#26495;)</span></td>
</tr>
<tr class="t-dsc">
<td>
<div class="t-dsc-member-div">
<div><a href="cpp-thread-future_category.html"><span class="t-lines"><span>future_category</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11" style="white-space: nowrap;">(C++11)</span></span></span></div>
</div>
</td>
<td>&#37492;&#21035;&#26410;&#26469;&#20307;&#38169;&#35823;&#31867;&#21035;<br />
<span class="t-mark" style="white-space: nowrap;">(&#20989;&#25968;)</span></td>
</tr>
<tr class="t-dsc">
<td>
<div class="t-dsc-member-div">
<div><a href="cpp-thread-promise-swap2.html"><span class="t-lines"><span>std::swap<span class="t-dsc-small">(std::promise)</span></span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11" style="white-space: nowrap;">(C++11)</span></span></span></div>
</div>
</td>
<td>&#29305;&#21270; <span class="t-lc"><a href="cpp-algorithm-swap.html">std::swap</a></span> &#31639;&#27861;<br />
<span class="t-mark" style="white-space: nowrap;">(&#20989;&#25968;&#27169;&#26495;)</span></td>
</tr>
<tr class="t-dsc">
<td>
<div class="t-dsc-member-div">
<div><a href="cpp-thread-packaged_task-swap2.html"><span class="t-lines"><span>std::swap<span class="t-dsc-small">(std::packaged_task)</span></span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11" style="white-space: nowrap;">(C++11)</span></span></span></div>
</div>
</td>
<td>&#29305;&#21270; <span class="t-lc"><a href="cpp-algorithm-swap.html">std::swap</a></span> &#31639;&#27861;<br />
<span class="t-mark" style="white-space: nowrap;">(&#20989;&#25968;&#27169;&#26495;)</span></td>
</tr>
</table>
<h3><span class="mw-headline" id=".E6.A6.82.E8.A6.81">&#27010;&#35201;</span></h3>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="cpp source-cpp">
<pre class="de1"><span class="kw1">namespace</span> std <span class="br0">{</span>
  <span class="kw2">enum</span> <span class="kw1">class</span> future_errc <span class="br0">{</span>
    broken_promise <span class="sy1">=</span> <span class="coMULTI">/* &#30001;&#23454;&#29616;&#23450;&#20041; */</span>,
    future_already_retrieved <span class="sy1">=</span> <span class="coMULTI">/* &#30001;&#23454;&#29616;&#23450;&#20041; */</span>,
    promise_already_satisfied <span class="sy1">=</span> <span class="coMULTI">/* &#30001;&#23454;&#29616;&#23450;&#20041; */</span>,
    no_state <span class="sy1">=</span> <span class="coMULTI">/* &#30001;&#23454;&#29616;&#23450;&#20041; */</span>
  <span class="br0">}</span><span class="sy4">;</span>
 
  <span class="kw2">enum</span> <span class="kw1">class</span> launch <span class="sy4">:</span> <span class="coMULTI">/* &#26410;&#25351;&#26126; */</span> <span class="br0">{</span>
    async <span class="sy1">=</span> <span class="coMULTI">/* &#26410;&#25351;&#26126; */</span>,
    deferred <span class="sy1">=</span> <span class="coMULTI">/* &#26410;&#25351;&#26126; */</span>,
    <span class="coMULTI">/* &#30001;&#23454;&#29616;&#23450;&#20041; */</span>
  <span class="br0">}</span><span class="sy4">;</span>
 
  <span class="kw2">enum</span> <span class="kw1">class</span> future_status <span class="br0">{</span>
    ready,
    timeout,
    deferred
  <span class="br0">}</span><span class="sy4">;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;&gt;</span> <span class="kw1">struct</span> is_error_code_enum<span class="sy1">&lt;</span>future_errc<span class="sy1">&gt;</span> <span class="sy4">:</span> <span class="kw1">public</span> true_type <span class="br0">{</span> <span class="br0">}</span><span class="sy4">;</span>
  error_code make_error_code<span class="br0">(</span>future_errc e<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
  error_condition make_error_condition<span class="br0">(</span>future_errc e<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
 
  <span class="kw4">const</span> error_category<span class="sy3">&amp;</span> future_category<span class="br0">(</span><span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
 
  <span class="kw1">class</span> future_error<span class="sy4">;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R<span class="sy1">&gt;</span> <span class="kw1">class</span> promise<span class="sy4">;</span>
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R<span class="sy1">&gt;</span> <span class="kw1">class</span> promise<span class="sy1">&lt;</span>R<span class="sy3">&amp;</span><span class="sy1">&gt;</span><span class="sy4">;</span>
  <span class="kw1">template</span><span class="sy1">&lt;&gt;</span> <span class="kw1">class</span> promise<span class="sy1">&lt;</span><span class="kw4">void</span><span class="sy1">&gt;</span><span class="sy4">;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R<span class="sy1">&gt;</span>
    <span class="kw4">void</span> swap<span class="br0">(</span>promise<span class="sy1">&lt;</span>R<span class="sy1">&gt;</span><span class="sy3">&amp;</span> x, promise<span class="sy1">&lt;</span>R<span class="sy1">&gt;</span><span class="sy3">&amp;</span> y<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R, <span class="kw1">class</span> Alloc<span class="sy1">&gt;</span>
    <span class="kw1">struct</span> uses_allocator<span class="sy1">&lt;</span>promise<span class="sy1">&lt;</span>R<span class="sy1">&gt;</span>, Alloc<span class="sy1">&gt;</span><span class="sy4">;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R<span class="sy1">&gt;</span> <span class="kw1">class</span> future<span class="sy4">;</span>
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R<span class="sy1">&gt;</span> <span class="kw1">class</span> future<span class="sy1">&lt;</span>R<span class="sy3">&amp;</span><span class="sy1">&gt;</span><span class="sy4">;</span>
  <span class="kw1">template</span><span class="sy1">&lt;&gt;</span> <span class="kw1">class</span> future<span class="sy1">&lt;</span><span class="kw4">void</span><span class="sy1">&gt;</span><span class="sy4">;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R<span class="sy1">&gt;</span> <span class="kw1">class</span> shared_future<span class="sy4">;</span>
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R<span class="sy1">&gt;</span> <span class="kw1">class</span> shared_future<span class="sy1">&lt;</span>R<span class="sy3">&amp;</span><span class="sy1">&gt;</span><span class="sy4">;</span>
  <span class="kw1">template</span><span class="sy1">&lt;&gt;</span> <span class="kw1">class</span> shared_future<span class="sy1">&lt;</span><span class="kw4">void</span><span class="sy1">&gt;</span><span class="sy4">;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span><span class="sy1">&gt;</span> <span class="kw1">class</span> packaged_task<span class="sy4">;</span>  <span class="co1">// &#19981;&#23450;&#20041;</span>
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R, <span class="kw1">class</span>... <span class="me1">ArgTypes</span><span class="sy1">&gt;</span>
    <span class="kw1">class</span> packaged_task<span class="sy1">&lt;</span>R<span class="br0">(</span>ArgTypes...<span class="br0">)</span><span class="sy1">&gt;</span><span class="sy4">;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R, <span class="kw1">class</span>... <span class="me1">ArgTypes</span><span class="sy1">&gt;</span>
    <span class="kw4">void</span> swap<span class="br0">(</span>packaged_task<span class="sy1">&lt;</span>R<span class="br0">(</span>ArgTypes...<span class="br0">)</span><span class="sy1">&gt;</span><span class="sy3">&amp;</span>, packaged_task<span class="sy1">&lt;</span>R<span class="br0">(</span>ArgTypes...<span class="br0">)</span><span class="sy1">&gt;</span><span class="sy3">&amp;</span><span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> F, <span class="kw1">class</span>... <span class="me1">Args</span><span class="sy1">&gt;</span>
    future<span class="sy1">&lt;</span>invoke_result_t<span class="sy1">&lt;</span>decay_t<span class="sy1">&lt;</span>F<span class="sy1">&gt;</span>, decay_t<span class="sy1">&lt;</span>Args<span class="sy1">&gt;</span>...<span class="sy1">&gt;&gt;</span>
      async<span class="br0">(</span>F<span class="sy3">&amp;&amp;</span> f, Args<span class="sy3">&amp;&amp;</span>... <span class="me1">args</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> F, <span class="kw1">class</span>... <span class="me1">Args</span><span class="sy1">&gt;</span>
    future<span class="sy1">&lt;</span>invoke_result_t<span class="sy1">&lt;</span>decay_t<span class="sy1">&lt;</span>F<span class="sy1">&gt;</span>, decay_t<span class="sy1">&lt;</span>Args<span class="sy1">&gt;</span>...<span class="sy1">&gt;&gt;</span>
      async<span class="br0">(</span>launch policy, F<span class="sy3">&amp;&amp;</span> f, Args<span class="sy3">&amp;&amp;</span>... <span class="me1">args</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div>
</div>
<h4><span class="mw-headline" id=".E7.B1.BB_std::future_error">&#31867; <span class="t-lc"><a href="cpp-thread-future_error.html">std::future_error</a></span></span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="cpp source-cpp">
<pre class="de1"><span class="kw1">namespace</span> std <span class="br0">{</span>
  <span class="kw1">class</span> future_error <span class="sy4">:</span> <span class="kw1">public</span> logic_error <span class="br0">{</span>
  <span class="kw1">public</span><span class="sy4">:</span>
    <span class="kw1">explicit</span> future_error<span class="br0">(</span>future_errc e<span class="br0">)</span><span class="sy4">;</span>
 
    <span class="kw4">const</span> error_code<span class="sy3">&amp;</span> code<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    <span class="kw4">const</span> <span class="kw4">char</span><span class="sy2">*</span>       what<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
 
  <span class="kw1">private</span><span class="sy4">:</span>
    error_code ec_<span class="sy4">;</span>             <span class="co1">// &#20165;&#29992;&#20110;&#38416;&#37322;</span>
  <span class="br0">}</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div>
</div>
<h4><span class="mw-headline" id=".E7.B1.BB.E6.A8.A1.E6.9D.BF_std::promise">&#31867;&#27169;&#26495; <span class="t-lc"><a href="cpp-thread-promise.html">std::promise</a></span></span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="cpp source-cpp">
<pre class="de1"><span class="kw1">namespace</span> std <span class="br0">{</span>
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R<span class="sy1">&gt;</span>
  <span class="kw1">class</span> promise <span class="br0">{</span>
  <span class="kw1">public</span><span class="sy4">:</span>
    promise<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> Allocator<span class="sy1">&gt;</span>
      promise<span class="br0">(</span>allocator_arg_t, <span class="kw4">const</span> Allocator<span class="sy3">&amp;</span> a<span class="br0">)</span><span class="sy4">;</span>
    promise<span class="br0">(</span>promise<span class="sy3">&amp;&amp;</span> rhs<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    promise<span class="br0">(</span><span class="kw4">const</span> promise<span class="sy3">&amp;</span><span class="br0">)</span> <span class="sy1">=</span> delete<span class="sy4">;</span>
    ~promise<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
 
    <span class="co1">// &#36171;&#20540;</span>
    promise<span class="sy3">&amp;</span> operator<span class="sy1">=</span><span class="br0">(</span>promise<span class="sy3">&amp;&amp;</span> rhs<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    promise<span class="sy3">&amp;</span> operator<span class="sy1">=</span><span class="br0">(</span><span class="kw4">const</span> promise<span class="sy3">&amp;</span><span class="br0">)</span> <span class="sy1">=</span> delete<span class="sy4">;</span>
    <span class="kw4">void</span> swap<span class="br0">(</span>promise<span class="sy3">&amp;</span> other<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
 
    <span class="co1">// &#21462;&#24471;&#32467;&#26524;</span>
    future<span class="sy1">&lt;</span>R<span class="sy1">&gt;</span> get_future<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
 
    <span class="co1">// &#35774;&#32622;&#32467;&#26524;</span>
    <span class="kw4">void</span> set_value<span class="br0">(</span><span class="coMULTI">/* &#35265;&#25551;&#36848; */</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw4">void</span> set_exception<span class="br0">(</span>exception_ptr p<span class="br0">)</span><span class="sy4">;</span>
 
    <span class="co1">// &#20197;&#24310;&#36831;&#25552;&#37266;&#35774;&#32622;&#32467;&#26524;</span>
    <span class="kw4">void</span> set_value_at_thread_exit<span class="br0">(</span><span class="coMULTI">/* &#35265;&#25551;&#36848; */</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw4">void</span> set_exception_at_thread_exit<span class="br0">(</span>exception_ptr p<span class="br0">)</span><span class="sy4">;</span>
  <span class="br0">}</span><span class="sy4">;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R<span class="sy1">&gt;</span>
    <span class="kw4">void</span> swap<span class="br0">(</span>promise<span class="sy1">&lt;</span>R<span class="sy1">&gt;</span><span class="sy3">&amp;</span> x, promise<span class="sy1">&lt;</span>R<span class="sy1">&gt;</span><span class="sy3">&amp;</span> y<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R, <span class="kw1">class</span> Alloc<span class="sy1">&gt;</span>
    <span class="kw1">struct</span> uses_allocator<span class="sy1">&lt;</span>promise<span class="sy1">&lt;</span>R<span class="sy1">&gt;</span>, Alloc<span class="sy1">&gt;</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div>
</div>
<h4><span class="mw-headline" id=".E7.B1.BB.E6.A8.A1.E6.9D.BF_std::future">&#31867;&#27169;&#26495; <span class="t-lc"><a href="cpp-thread-future.html">std::future</a></span></span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="cpp source-cpp">
<pre class="de1"><span class="kw1">namespace</span> std <span class="br0">{</span>
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R<span class="sy1">&gt;</span>
  <span class="kw1">class</span> future <span class="br0">{</span>
  <span class="kw1">public</span><span class="sy4">:</span>
    future<span class="br0">(</span><span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    future<span class="br0">(</span>future<span class="sy3">&amp;&amp;</span><span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    future<span class="br0">(</span><span class="kw4">const</span> future<span class="sy3">&amp;</span><span class="br0">)</span> <span class="sy1">=</span> delete<span class="sy4">;</span>
    ~future<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    future<span class="sy3">&amp;</span> operator<span class="sy1">=</span><span class="br0">(</span><span class="kw4">const</span> future<span class="sy3">&amp;</span><span class="br0">)</span> <span class="sy1">=</span> delete<span class="sy4">;</span>
    future<span class="sy3">&amp;</span> operator<span class="sy1">=</span><span class="br0">(</span>future<span class="sy3">&amp;&amp;</span><span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    shared_future<span class="sy1">&lt;</span>R<span class="sy1">&gt;</span> share<span class="br0">(</span><span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
 
    <span class="co1">// &#21462;&#24471;&#20540;</span>
    <span class="coMULTI">/* &#35265;&#25551;&#36848; */</span> get<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
 
    <span class="co1">// functions to check state</span>
    <span class="kw4">bool</span> valid<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
 
    <span class="kw4">void</span> wait<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span><span class="sy4">;</span>
    <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> Rep, <span class="kw1">class</span> Period<span class="sy1">&gt;</span>
      future_status wait_for<span class="br0">(</span><span class="kw4">const</span> chrono<span class="sy4">::</span><span class="me2">duration</span><span class="sy1">&lt;</span>Rep, Period<span class="sy1">&gt;</span><span class="sy3">&amp;</span> rel_time<span class="br0">)</span> <span class="kw4">const</span><span class="sy4">;</span>
    <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> Clock, <span class="kw1">class</span> Duration<span class="sy1">&gt;</span>
      future_status wait_until<span class="br0">(</span><span class="kw4">const</span> chrono<span class="sy4">::</span><span class="me2">time_point</span><span class="sy1">&lt;</span>Clock, Duration<span class="sy1">&gt;</span><span class="sy3">&amp;</span> abs_time<span class="br0">)</span> <span class="kw4">const</span><span class="sy4">;</span>
  <span class="br0">}</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div>
</div>
<h4><span class="mw-headline" id=".E7.B1.BB.E6.A8.A1.E6.9D.BF_std::shared_future">&#31867;&#27169;&#26495; <span class="t-lc"><a href="cpp-thread-shared_future.html">std::shared_future</a></span></span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="cpp source-cpp">
<pre class="de1"><span class="kw1">namespace</span> std <span class="br0">{</span>
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R<span class="sy1">&gt;</span>
  <span class="kw1">class</span> shared_future <span class="br0">{</span>
  <span class="kw1">public</span><span class="sy4">:</span>
    shared_future<span class="br0">(</span><span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    shared_future<span class="br0">(</span><span class="kw4">const</span> shared_future<span class="sy3">&amp;</span> rhs<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    shared_future<span class="br0">(</span>future<span class="sy1">&lt;</span>R<span class="sy1">&gt;</span><span class="sy3">&amp;&amp;</span><span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    shared_future<span class="br0">(</span>shared_future<span class="sy3">&amp;&amp;</span> rhs<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    ~shared_future<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    shared_future<span class="sy3">&amp;</span> operator<span class="sy1">=</span><span class="br0">(</span><span class="kw4">const</span> shared_future<span class="sy3">&amp;</span> rhs<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    shared_future<span class="sy3">&amp;</span> operator<span class="sy1">=</span><span class="br0">(</span>shared_future<span class="sy3">&amp;&amp;</span> rhs<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
 
    <span class="co1">// &#21462;&#24471;&#20540;</span>
    <span class="coMULTI">/* &#35265;&#25551;&#36848; */</span> get<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span><span class="sy4">;</span>
 
    <span class="co1">// &#26816;&#26597;&#29366;&#24577;&#30340;&#20989;&#25968;</span>
    <span class="kw4">bool</span> valid<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
 
    <span class="kw4">void</span> wait<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span><span class="sy4">;</span>
    <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> Rep, <span class="kw1">class</span> Period<span class="sy1">&gt;</span>
      future_status wait_for<span class="br0">(</span><span class="kw4">const</span> chrono<span class="sy4">::</span><span class="me2">duration</span><span class="sy1">&lt;</span>Rep, Period<span class="sy1">&gt;</span><span class="sy3">&amp;</span> rel_time<span class="br0">)</span> <span class="kw4">const</span><span class="sy4">;</span>
    <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> Clock, <span class="kw1">class</span> Duration<span class="sy1">&gt;</span>
      future_status wait_until<span class="br0">(</span><span class="kw4">const</span> chrono<span class="sy4">::</span><span class="me2">time_point</span><span class="sy1">&lt;</span>Clock, Duration<span class="sy1">&gt;</span><span class="sy3">&amp;</span> abs_time<span class="br0">)</span> <span class="kw4">const</span><span class="sy4">;</span>
  <span class="br0">}</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div>
</div>
<h4><span class="mw-headline" id=".E7.B1.BB.E6.A8.A1.E6.9D.BF_std::packaged_task">&#31867;&#27169;&#26495; <span class="t-lc"><a href="cpp-thread-packaged_task.html">std::packaged_task</a></span></span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="cpp source-cpp">
<pre class="de1"><span class="kw1">namespace</span> std <span class="br0">{</span>
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span><span class="sy1">&gt;</span> <span class="kw1">class</span> packaged_task<span class="sy4">;</span>  <span class="co1">// &#19981;&#23450;&#20041;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R, <span class="kw1">class</span>... <span class="me1">ArgTypes</span><span class="sy1">&gt;</span>
  <span class="kw1">class</span> packaged_task<span class="sy1">&lt;</span>R<span class="br0">(</span>ArgTypes...<span class="br0">)</span><span class="sy1">&gt;</span> <span class="br0">{</span>
  <span class="kw1">public</span><span class="sy4">:</span>
    <span class="co1">// &#26500;&#36896;&#19982;&#26512;&#26500;</span>
    packaged_task<span class="br0">(</span><span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> F<span class="sy1">&gt;</span>
      <span class="kw1">explicit</span> packaged_task<span class="br0">(</span>F<span class="sy3">&amp;&amp;</span> f<span class="br0">)</span><span class="sy4">;</span>
    ~packaged_task<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
 
    <span class="co1">// &#26080;&#22797;&#21046;</span>
    packaged_task<span class="br0">(</span><span class="kw4">const</span> packaged_task<span class="sy3">&amp;</span><span class="br0">)</span> <span class="sy1">=</span> delete<span class="sy4">;</span>
    packaged_task<span class="sy3">&amp;</span> operator<span class="sy1">=</span><span class="br0">(</span><span class="kw4">const</span> packaged_task<span class="sy3">&amp;</span><span class="br0">)</span> <span class="sy1">=</span> delete<span class="sy4">;</span>
 
    <span class="co1">// &#31227;&#21160;&#25903;&#25345;</span>
    packaged_task<span class="br0">(</span>packaged_task<span class="sy3">&amp;&amp;</span> rhs<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    packaged_task<span class="sy3">&amp;</span> operator<span class="sy1">=</span><span class="br0">(</span>packaged_task<span class="sy3">&amp;&amp;</span> rhs<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    <span class="kw4">void</span> swap<span class="br0">(</span>packaged_task<span class="sy3">&amp;</span> other<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
 
    <span class="kw4">bool</span> valid<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
 
    <span class="co1">// &#32467;&#26524;&#21462;&#24471;</span>
    future<span class="sy1">&lt;</span>R<span class="sy1">&gt;</span> get_future<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
 
    <span class="co1">// &#25191;&#34892;</span>
    <span class="kw4">void</span> operator<span class="br0">(</span><span class="br0">)</span><span class="br0">(</span>ArgTypes... <span class="br0">)</span><span class="sy4">;</span>
    <span class="kw4">void</span> make_ready_at_thread_exit<span class="br0">(</span>ArgTypes...<span class="br0">)</span><span class="sy4">;</span>
 
    <span class="kw4">void</span> reset<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="br0">}</span><span class="sy4">;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R, <span class="kw1">class</span>... <span class="me1">ArgTypes</span><span class="sy1">&gt;</span>
  packaged_task<span class="br0">(</span>R <span class="br0">(</span><span class="sy2">*</span><span class="br0">)</span><span class="br0">(</span>ArgTypes...<span class="br0">)</span><span class="br0">)</span> <span class="sy2">-</span><span class="sy1">&gt;</span> packaged_task<span class="sy1">&lt;</span>R<span class="br0">(</span>ArgTypes...<span class="br0">)</span><span class="sy1">&gt;</span><span class="sy4">;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> F<span class="sy1">&gt;</span> packaged_task<span class="br0">(</span>F<span class="br0">)</span> <span class="sy2">-</span><span class="sy1">&gt;</span> packaged_task<span class="sy1">&lt;</span><span class="coMULTI">/* &#35265;&#25551;&#36848; */</span><span class="sy1">&gt;</span><span class="sy4">;</span>
 
  <span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> R, <span class="kw1">class</span>... <span class="me1">ArgTypes</span><span class="sy1">&gt;</span>
    <span class="kw4">void</span> swap<span class="br0">(</span>packaged_task<span class="sy1">&lt;</span>R<span class="br0">(</span>ArgTypes...<span class="br0">)</span><span class="sy1">&gt;</span><span class="sy3">&amp;</span> x, packaged_task<span class="sy1">&lt;</span>R<span class="br0">(</span>ArgTypes...<span class="br0">)</span><span class="sy1">&gt;</span><span class="sy3">&amp;</span> y<span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div>
</div>
</div>
<div class="visualClear"></div>
</div>
</div>
</div>
</body>
</html>
