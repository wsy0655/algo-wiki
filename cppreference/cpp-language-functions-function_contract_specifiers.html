<!DOCTYPE html>
<html lang="zh" dir="ltr" class="client-nojs" xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh">
<head><meta http-equiv="x-ua-compatible" content="ie=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>&#20989;&#25968;&#22865;&#32422;&#35828;&#26126;&#31526; (C++26 &#36215;)</title>
<link rel="stylesheet" href="ext.css" />
<link rel="stylesheet" href="site_modules.css" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-cpp_language_functions_function_contract_specifiers skin-cppreference2 action-view cpp-navbar">
<div id="cpp-content-base">
<div id="content"><a id="top"></a>
<h1 id="firstHeading" class="firstHeading">&#20989;&#25968;&#22865;&#32422;&#35828;&#26126;&#31526; <span class="t-mark-rev t-since-cxx26" style="white-space: nowrap;">(C++26 &#36215;)</span></h1>
<div id="bodyContent">
<div id="contentSub"><span class="subpages">&lt; <a href="cpp.html">cpp</a>&lrm; | <a href="cpp-language.html">language</a>&lrm; | <a href="cpp-language-functions.html">functions</a></span></div>
<div id="mw-content-text" lang="zh" dir="ltr" class="mw-content-ltr" xml:lang="zh">
<p><br /></p>
<p>&#20989;&#25968;&#22865;&#32422;&#35828;&#26126;&#31526;&#65288;&#21069;&#26465;&#20214;&#20889;&#20026; <span class="mw-geshi cpp source-cpp">pre</span>&#65292;&#21518;&#26465;&#20214;&#20889;&#20026; <span class="mw-geshi cpp source-cpp">post</span>&#65289;&#26159;&#21487;&#24212;&#29992;&#20110;&#20989;&#25968;&#25110; lambda &#34920;&#36798;&#24335;&#30340;&#22768;&#26126;&#31526;&#30340;&#35828;&#26126;&#31526;&#65292;&#20197;&#21521;&#23545;&#24212;&#20989;&#25968;&#24341;&#20837;&#30456;&#24212;&#31181;&#31867;&#30340;&#20989;&#25968;&#22865;&#32422;&#26029;&#35328;&#12290;</p>
<p>&#23427;&#20204;&#30830;&#20445;&#25351;&#23450;&#30340;&#26465;&#20214;&#25104;&#31435;&#22312;&#25191;&#34892;&#26102;&#65292;&#22312;&#35843;&#35797;&#26500;&#24314;&#20013;&#24403;&#26465;&#20214;&#27714;&#20540;&#20026; <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw2">false</span></span></span>&#65292;&#25110;&#32773;&#27714;&#20540;&#30001;&#20110;&#24322;&#24120;&#36864;&#20986;&#26102;&#35302;&#21457;&#36829;&#20363;&#65288;&#22914;&#32456;&#27490;&#31243;&#24207;&#65289;&#65292;&#20063;&#21487;&#22312;&#21457;&#24067;&#26500;&#24314;&#20013;&#20026;&#24615;&#33021;&#32780;&#23558;&#20043;&#24573;&#30053;&#12290;</p>
<h4><span class="mw-headline" id=".E5.89.8D.E6.9D.A1.E4.BB.B6">&#21069;&#26465;&#20214;</span></h4>
<p>&#21069;&#26465;&#20214; (<span class="mw-geshi cpp source-cpp">pre</span>) &#26159;<b>&#35843;&#29992;&#26041;</b>&#24517;&#39035;&#30830;&#20445;&#20110;&#35843;&#29992;&#20989;&#25968;&#25110; lambda <i>&#20043;&#21069;</i>&#8202;&#65279;&#25104;&#31435;&#30340;&#35859;&#35789;&#65292;&#35843;&#35797;&#26500;&#24314;&#20013;&#26816;&#26597;&#23427;&#20197;&#39564;&#35777;&#36755;&#20837;&#25110;&#29366;&#24577;&#12290;</p>
<h4><span class="mw-headline" id=".E5.90.8E.E6.9D.A1.E4.BB.B6">&#21518;&#26465;&#20214;</span></h4>
<p>&#21518;&#26465;&#20214; (<span class="mw-geshi cpp source-cpp">post</span>) &#26159;<b>&#34987;&#35843;&#29992;&#26041;</b>&#24517;&#39035;&#30830;&#20445;&#20110;&#20989;&#25968;&#25110; lambda &#25191;&#34892;&#32467;&#26463;<i>&#20043;&#21518;</i>&#8202;&#65279;&#25104;&#31435;&#30340;&#35859;&#35789;&#65292;&#35843;&#35797;&#26500;&#24314;&#20013;&#39564;&#35777;&#23427;&#20197;&#30830;&#35748;&#36755;&#20986;&#25110;&#29366;&#24577;&#12290;</p>
<h3><span class="mw-headline" id=".E8.AF.AD.E6.B3.95">&#35821;&#27861;</span></h3>
<table class="t-sdsc-begin">
<tr>
<td colspan="10" class="t-sdsc-sep"></td>
</tr>
<tr class="t-sdsc">
<td><code><b>pre</b></code> <span class="t-spar">&#23646;&#24615;</span>&#8202;&#65279;<span class="t-mark" style="white-space: nowrap;">(&#21487;&#36873;)</span> <code><b>(</b></code> <span class="t-spar">&#34920;&#36798;&#24335;</span> <code><b>)</b></code></td>
<td>(1)</td>
<td class="t-sdsc-nopad"></td>
</tr>
<tr>
<td colspan="10" class="t-sdsc-sep"></td>
</tr>
<tr class="t-sdsc">
<td><code><b>post</b></code> <span class="t-spar">&#23646;&#24615;</span>&#8202;&#65279;<span class="t-mark" style="white-space: nowrap;">(&#21487;&#36873;)</span> <code><b>(</b></code> <span class="t-spar">&#32467;&#26524;&#21517;</span>&#8202;&#65279;<span class="t-mark" style="white-space: nowrap;">(&#21487;&#36873;)</span> <span class="t-spar">&#35859;&#35789;</span> <code><b>)</b></code></td>
<td>(2)</td>
<td class="t-sdsc-nopad"></td>
</tr>
<tr>
<td colspan="10" class="t-sdsc-sep"></td>
</tr>
</table>
<table class="t-par-begin">
<tr class="t-par">
<td><span class="t-spar">&#23646;&#24615;</span></td>
<td>-</td>
<td>&#20219;&#24847;&#25968;&#37327;&#30340;<a href="cpp-language-attributes.html">&#23646;&#24615;</a></td>
</tr>
<tr class="t-par">
<td><span class="t-spar">&#32467;&#26524;&#21517;</span></td>
<td>-</td>
<td><span class="t-spar">&#26631;&#35782;&#31526;</span> <code><b>:</b></code></td>
</tr>
<tr class="t-par">
<td><span class="t-spar">&#26631;&#35782;&#31526;</span></td>
<td>-</td>
<td>&#19982;&#20851;&#32852;&#20989;&#25968;&#30340;&#32467;&#26524;&#32465;&#23450;&#30340;&#21517;&#23383;</td>
</tr>
<tr class="t-par">
<td><span class="t-spar">&#35859;&#35789;</span></td>
<td>-</td>
<td>&#24212;&#24403;&#27714;&#20540;&#20026; <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw2">true</span></span></span> &#30340;&#24067;&#23572;&#34920;&#36798;&#24335;</td>
</tr>
</table>
<span style="display:inline-block"></span>
<div class="t-li1"><span class="t-li">1)</span> &#21069;&#26465;&#20214;</div>
<div class="t-li1"><span class="t-li">2)</span> &#21518;&#26465;&#20214;</div>
<h3><span class="mw-headline" id=".E5.85.B3.E9.94.AE.E8.AF.8D">&#20851;&#38190;&#35789;</span></h3>
<p><a href="cpp-identifier_with_special_meaning-pre.html"><tt>pre</tt></a>, <a href="cpp-identifier_with_special_meaning-post.html"><tt>post</tt></a></p>
<h3><span class="mw-headline" id=".E6.B3.A8.E8.A7.A3">&#27880;&#35299;</span></h3>
<table class="wikitable">
<tr>
<th>&#21151;&#33021;&#29305;&#24615;&#27979;&#35797;&#23439;</th>
<th><abbr title="&#37319;&#32435;&#35813;&#29305;&#24615;&#30340;&#24180;/&#26376;&#12290;&#27599;&#20010;&#20540;&#19979;&#38754;&#30340;&#38142;&#25509;&#25351;&#21521;&#32534;&#35793;&#26399;&#25903;&#25345;&#39029;&#38754;&#20013;&#32473;&#23450;&#21151;&#33021;&#29305;&#24615;&#30340;&#26465;&#30446;&#12290;">&#20540;</abbr></th>
<th><abbr title="&#24341;&#20837;&#35813;&#29305;&#24615;&#30340;&#26631;&#20934;&#65307;DR &#24847;&#20026;&#38024;&#23545;&#35813;&#20462;&#35746;&#29256;&#30340;&#32570;&#38519;&#25253;&#21578;">&#26631;&#20934;</abbr></th>
<th>&#21151;&#33021;&#29305;&#24615;</th>
</tr>
<tr>
<td><a href="cpp-feature_test.html#cpp_contracts"><code>__cpp_contracts</code></a></td>
<td><a href="cpp-compiler_support-26.html#cpp_contracts_202502L"><code>202502L</code></a></td>
<td><span class="t-mark" style="white-space: nowrap;">(C++26)</span></td>
<td><a href="cpp-language-contracts.html">&#22865;&#32422;</a></td>
</tr>
</table>
<h3><span class="mw-headline" id=".E7.A4.BA.E4.BE.8B">&#31034;&#20363;</span></h3>
<ul>
<li>&#20989;&#25968; <code>normalize</code> &#30340;&#21069;&#26465;&#20214;&#35201;&#27714;&#35843;&#29992;&#26041;&#20256;&#36882;&#21487;&#27491;&#35268;&#21270;&#30340;&#21521;&#37327;&#12290;</li>
<li>&#21518;&#26465;&#20214;&#21017;&#20445;&#35777;&#20989;&#25968; <code>normalize</code> &#36820;&#22238;&#27491;&#35268;&#21270;&#21518;&#30340; <code>vector</code>&#12290;</li>
</ul>
<div class="t-example">
<div class="t-example-live-link"></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="cpp source-cpp">
<pre class="de1"><span class="co2">#include &lt;array&gt;</span>
<span class="co2">#include &lt;cmath&gt;</span>
<span class="co2">#include &lt;concepts&gt;</span>
<span class="co2">#include &lt;contracts&gt;</span>
<span class="co2">#include &lt;limits&gt;</span>
<span class="co2">#include &lt;print&gt;</span>
 
<span class="kw1">template</span> <span class="sy1">&lt;</span><a href="cpp-concepts-floating_point.html"><span class="kw2941">std::<span class="me2">floating_point</span></span></a> T<span class="sy1">&gt;</span>
<span class="kw4">constexpr</span> <span class="kw4">auto</span> is_normalizable<span class="br0">(</span><span class="kw4">const</span> <a href="cpp-container-array.html"><span class="kw1271">std::<span class="me2">array</span></span></a><span class="sy1">&lt;</span>T, <span class="nu0">3</span><span class="sy1">&gt;</span><span class="sy3">&amp;</span> vector<span class="br0">)</span> <span class="kw1">noexcept</span>
<span class="br0">{</span>
    <span class="kw4">const</span> <span class="kw4">auto</span><span class="sy3">&amp;</span> <span class="br0">[</span>x, y, z<span class="br0">]</span><span class="br0">{</span>vector<span class="br0">}</span><span class="sy4">;</span>
    <span class="kw4">const</span> <span class="kw4">auto</span> norm<span class="br0">{</span><a href="cpp-numeric-math-hypot.html"><span class="kw1334">std::<span class="me2">hypot</span></span></a><span class="br0">(</span>x, y, z<span class="br0">)</span><span class="br0">}</span><span class="sy4">;</span>
 
    <span class="kw1">return</span> <a href="cpp-numeric-math-isfinite.html"><span class="kw1372">std::<span class="me2">isfinite</span></span></a><span class="br0">(</span>norm<span class="br0">)</span> <span class="sy3">&amp;&amp;</span> norm <span class="sy1">&gt;</span> T <span class="br0">{</span><span class="nu0">0</span><span class="br0">}</span><span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw1">template</span> <span class="sy1">&lt;</span><a href="cpp-concepts-floating_point.html"><span class="kw2941">std::<span class="me2">floating_point</span></span></a> T<span class="sy1">&gt;</span>
<span class="kw4">constexpr</span> <span class="kw4">auto</span> is_normalized<span class="br0">(</span><span class="kw4">const</span> <a href="cpp-container-array.html"><span class="kw1271">std::<span class="me2">array</span></span></a><span class="sy1">&lt;</span>T, <span class="nu0">3</span><span class="sy1">&gt;</span><span class="sy3">&amp;</span> vector<span class="br0">)</span> <span class="kw1">noexcept</span>
<span class="br0">{</span>
    <span class="kw4">const</span> <span class="kw4">auto</span><span class="sy3">&amp;</span> <span class="br0">[</span>x, y, z<span class="br0">]</span><span class="br0">{</span>vector<span class="br0">}</span><span class="sy4">;</span>
    <span class="kw4">const</span> <span class="kw4">auto</span> norm<span class="br0">{</span><a href="cpp-numeric-math-hypot.html"><span class="kw1334">std::<span class="me2">hypot</span></span></a><span class="br0">(</span>x, y, z<span class="br0">)</span><span class="br0">}</span><span class="sy4">;</span>
    <span class="kw4">constexpr</span> <span class="kw4">auto</span> tolerance<span class="br0">{</span><span class="nu8">010</span> <span class="sy2">*</span> <a href="cpp-types-numeric_limits.html"><span class="kw351">std::<span class="me2">numeric_limits</span></span></a><span class="sy1">&lt;</span>T<span class="sy1">&gt;</span><span class="sy4">::</span><span class="me2">epsilon</span><span class="br0">(</span><span class="br0">)</span><span class="br0">}</span><span class="sy4">;</span>
 
    <span class="kw1">if</span> <span class="br0">(</span><span class="sy3">!</span>is_normalizable<span class="br0">(</span>norm<span class="br0">)</span><span class="br0">)</span> <span class="br0">[</span><span class="br0">[</span>unlikely<span class="br0">]</span><span class="br0">]</span>
        <span class="kw1">return</span> <span class="kw2">false</span><span class="sy4">;</span>
 
    <span class="kw1">return</span> std<span class="sy4">::</span><span class="me2">abs</span><span class="br0">(</span>norm <span class="sy2">-</span> T<span class="br0">{</span><span class="nu0">1</span><span class="br0">}</span><span class="br0">)</span> <span class="sy1">&lt;=</span> tolerance<span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw1">template</span> <span class="sy1">&lt;</span><a href="cpp-concepts-floating_point.html"><span class="kw2941">std::<span class="me2">floating_point</span></span></a> T<span class="sy1">&gt;</span>
<span class="kw4">constexpr</span> <span class="kw4">auto</span> normalize<span class="br0">(</span><a href="cpp-container-array.html"><span class="kw1271">std::<span class="me2">array</span></span></a><span class="sy1">&lt;</span>T, <span class="nu0">3</span><span class="sy1">&gt;</span> vector<span class="br0">)</span> <span class="kw1">noexcept</span> <span class="sy2">-</span><span class="sy1">&gt;</span> <a href="cpp-container-array.html"><span class="kw1271">std::<span class="me2">array</span></span></a><span class="sy1">&lt;</span>T, <span class="nu0">3</span><span class="sy1">&gt;</span>
    pre<span class="br0">(</span>is_normalizable<span class="br0">(</span>vector<span class="br0">)</span><span class="br0">)</span>
    post<span class="br0">(</span>vector<span class="sy4">:</span> is_normalized<span class="br0">(</span>vector<span class="br0">)</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw4">auto</span><span class="sy3">&amp;</span> <span class="br0">[</span>x, y, z<span class="br0">]</span><span class="br0">{</span>vector<span class="br0">}</span><span class="sy4">;</span>
    <span class="kw4">const</span> <span class="kw4">auto</span> norm<span class="br0">{</span><a href="cpp-numeric-math-hypot.html"><span class="kw1334">std::<span class="me2">hypot</span></span></a><span class="br0">(</span>x, y, z<span class="br0">)</span><span class="br0">}</span><span class="sy4">;</span>
 
    x <span class="sy2">/</span><span class="sy1">=</span> norm, y <span class="sy2">/</span><span class="sy1">=</span> norm, z <span class="sy2">/</span><span class="sy1">=</span> norm<span class="sy4">;</span>
 
    <span class="kw1">return</span> vector<span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw4">int</span> main<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw4">const</span> <span class="kw4">auto</span> v <span class="sy1">=</span> normalize<span class="sy1">&lt;</span><span class="kw4">float</span><span class="sy1">&gt;</span><span class="br0">(</span><span class="br0">{</span><span class="nu16">0.3</span>, <span class="nu16">0.4</span>, <span class="nu16">0.5</span><span class="br0">}</span><span class="br0">)</span><span class="sy4">;</span>
    <a href="cpp-io-println.html"><span class="kw3364">std::<span class="me2">println</span></span></a><span class="br0">(</span><span class="st0">&quot;{}&quot;</span>, v<span class="br0">)</span><span class="sy4">;</span>
 
    <span class="kw4">const</span> <span class="kw4">auto</span> w <span class="sy1">=</span> normalize<span class="sy1">&lt;</span><span class="kw4">float</span><span class="sy1">&gt;</span><span class="br0">(</span><span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">}</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// &#36829;&#21453;&#21069;&#26465;&#20214;&#21644;&#21518;&#26465;&#20214;</span>
    <a href="cpp-io-println.html"><span class="kw3364">std::<span class="me2">println</span></span></a><span class="br0">(</span><span class="st0">&quot;{}&quot;</span>, w<span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div>
</div>
<p>&#21487;&#33021;&#30340;&#36755;&#20986;&#65306;</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="text source-text">
<pre class="de1">[0.4242641, 0.56568545, 0.70710677]
[-nan, -nan, -nan]</pre></div>
</div>
</div>
<h3><span class="mw-headline" id=".E5.BC.95.E7.94.A8">&#24341;&#29992;</span></h3>
<div class="t-ref-std-c++26">
<ul>
<li>C++26 &#26631;&#20934;&#65288;ISO/IEC 14882:2026&#65289;&#65306;</li>
</ul>
<dl>
<dd>
<ul>
<li>9.(3+<i>c&#8202;&#65279;</i>) Function contract specifiers [dcl.contract]</li>
</ul>
</dd>
</dl>
</div>
<h3><span class="mw-headline" id=".E5.8F.82.E9.98.85">&#21442;&#38405;</span></h3>
<table class="t-dsc-begin">
<tr class="t-dsc">
<td><a href="cpp-language-contracts.html">&#22865;&#32422;&#26029;&#35328;</a> <span class="t-mark-rev t-since-cxx26" style="white-space: nowrap;">(C++26)</span></td>
<td>&#25351;&#23450;&#24517;&#39035;&#20110;&#25191;&#34892;&#36807;&#31243;&#20013;&#29305;&#23450;&#20301;&#32622;&#25104;&#31435;&#30340;&#24615;&#36136;</td>
</tr>
<tr class="t-dsc">
<td><a href="cpp-language-contract_assert.html"><code>contract_assert</code> &#35821;&#21477;</a> <span class="t-mark-rev t-since-cxx26" style="white-space: nowrap;">(C++26)</span></td>
<td>&#22312;&#25191;&#34892;&#20013;&#39564;&#35777;&#19968;&#39033;&#20869;&#37096;&#26465;&#20214;</td>
</tr>
</table>
</div>
<div class="visualClear"></div>
</div>
</div>
</div>
</body>
</html>
